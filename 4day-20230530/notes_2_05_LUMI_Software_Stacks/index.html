


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lumi-supercomputer.github.io/LUMI-training-materials/4day-20230530/notes_2_05_LUMI_Software_Stacks/">
      
      
      
      
      <link rel="icon" href="../../assets/favicon-LUMI.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>LUMI Software Stacks - LUMI training materials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--demo:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 192h176V0h-16C71.6 0 0 71.6 0 160zm0 32v128c0 88.4 71.6 160 160 160h64c88.4 0 160-71.6 160-160V224H0m384-32v-32C384 71.6 312.4 0 224 0h-16v192z"/></svg>');--md-admonition-icon--exercise:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M78.6 5c-9.5-7.4-23-6.5-31.6 2L7 47c-8.5 8.5-9.4 22-2.1 31.6l80 104c4.5 5.9 11.6 9.4 19 9.4H158l109 109c-14.7 29-10 65.4 14.3 89.6l112 112c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3L192 158v-54.1c0-7.5-3.5-14.5-9.4-19zM19.9 396.1C7.2 408.8 0 426.1 0 444.1 0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9l117.8-117.8c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7zM512 144c0-10.5-1.1-20.7-3.2-30.5-2.4-11.2-16.1-14.1-24.2-6l-63.9 63.9c-3 3-7.1 4.7-11.3 4.7L352 176c-8.8 0-16-7.2-16-16v-57.4c0-4.2 1.7-8.3 4.7-11.3l63.9-63.9c8.1-8.1 5.2-21.8-6-24.2C388.7 1.1 378.5 0 368 0c-79.5 0-144 64.5-144 144v.8l85.3 85.3c36-9.1 75.8.5 104 28.7l15.7 15.7c49-23 83-72.8 83-130.5M56 432a24 24 0 1 1 48 0 24 24 0 1 1-48 0"/></svg>');--md-admonition-icon--remark:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32 0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9-1.9 24.5-11.4 46.3-21.4 62.9-5.5 9.2-11.1 16.6-15.2 21.6-2.1 2.5-3.7 4.4-4.9 5.7-.6.6-1 1.1-1.3 1.4l-.3.3c-4.6 4.6-5.9 11.4-3.4 17.4s8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3 22.9-10 42.4-21.9 54.3-30.6 31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64m128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64m96 32a32 32 0 1 1 64 0 32 32 0 1 1-64 0"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32M208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0m152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80M48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48m544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224z"/></svg>');--md-admonition-icon--audience:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M72 88a56 56 0 1 1 112 0 56 56 0 1 1-112 0m-8 157.7c-10 11.2-16 26.1-16 42.3s6 31.1 16 42.3v-84.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32v-26.8C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112h32c24 0 46.2 7.5 64.4 20.3zM448 416v-21.5c20-24.7 32-56.2 32-90.5 0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176h32c61.9 0 112 50.1 112 112 0 44.7-26.2 83.2-64 101.2V416c0 17.7-14.3 32-32 32h-64c-17.7 0-32-14.3-32-32m8-328a56 56 0 1 1 112 0 56 56 0 1 1-112 0m120 157.7v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128m-80 272c0 16.2 6 31 16 42.3v-84.7c-10 11.3-16 26.1-16 42.3zm144-42.3v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zm64 42.3c0 44.7-26.2 83.2-64 101.2V448c0 17.7-14.3 32-32 32h-64c-17.7 0-32-14.3-32-32v-42.8c-37.8-18-64-56.5-64-101.2 0-61.9 50.1-112 112-112h32c61.9 0 112 50.1 112 112"/></svg>');--md-admonition-icon--solution:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M234.7 42.7 197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1 14.1 37.7c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2l-37.7-14.1L263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0l381.3-381.4c18.7-18.7 18.7-49.1 0-67.9l-34.6-34.5c-18.7-18.7-49.1-18.7-67.9 0zM484.6 82.6l-105 105-23.3-23.3 105-105zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L64 96zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352z"/></svg>');--md-admonition-icon--seealso:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg>');--md-admonition-icon--technical:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M160 96a96 96 0 1 1 192 0 96 96 0 1 1-192 0m80 152v264l-48.4-24.2c-20.9-10.4-43.5-17-66.8-19.3l-96-9.6C12.5 457.2 0 443.5 0 427V224c0-17.7 14.3-32 32-32h30.3c63.6 0 125.6 19.6 177.7 56m32 264V248c52.1-36.4 114.1-56 177.7-56H480c17.7 0 32 14.3 32 32v203c0 16.4-12.5 30.2-28.8 31.8l-96 9.6c-23.2 2.3-45.9 8.9-66.8 19.3z"/></svg>');--md-admonition-icon--intermediate:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9V320c0 28.4-10.8 57.7-22.3 80.8-6.5 13-13.9 25.8-22.5 37.6-3.2 4.3-4.1 9.9-2.3 15s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7.3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7-3.2-14.2-7.5-28.7-13.5-42v-24.6c0-30.2 10.2-58.7 27.9-81.5 12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5.8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1l280.6-101c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1c-7.6-2.7-15.6-4.1-23.7-4.1M128 408c0 35.3 86 72 192 72s192-36.7 192-72l-15.3-145.4L354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6l-142.2-51.4z"/></svg>');--md-admonition-icon--advanced:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M219.3.5c3.1-.6 6.3-.6 9.4 0l200 40C439.9 42.7 448 52.6 448 64s-8.1 21.3-19.3 23.5L352 102.9V160c0 70.7-57.3 128-128 128S96 230.7 96 160v-57.1l-48-9.6v65.1l15.7 78.4c.9 4.7-.3 9.6-3.3 13.3S52.8 256 48 256H16c-4.8 0-9.3-2.1-12.4-5.9s-4.3-8.6-3.3-13.3L16 158.4V86.6C6.5 83.3 0 74.3 0 64c0-11.4 8.1-21.3 19.3-23.5zM111.9 327.7c10.5-3.4 21.8.4 29.4 8.5l71 75.5c6.3 6.7 17 6.7 23.3 0l71-75.5c7.6-8.1 18.9-11.9 29.4-8.5 65 20.9 112 81.7 112 153.6 0 17-13.8 30.7-30.7 30.7H30.7C13.8 512 0 498.2 0 481.3c0-71.9 47-132.7 111.9-153.6"/></svg>');--md-admonition-icon--lumi-be:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 0C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h96v-80c0-26.5 21.5-48 48-48s48 21.5 48 48v80h96c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm16 240c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16zm112-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16m80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16zM80 96h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16m80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16zm112-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16M448 0c-17.7 0-32 14.3-32 32v480h64V192h144c8.8 0 16-7.2 16-16V48c0-8.8-7.2-16-16-16H480c0-17.7-14.3-32-32-32"/></svg>');--md-admonition-icon--nice-to-know:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M297.2 248.9c14.4-20.6 22.8-45.7 22.8-72.9 0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9 3.7 5.3 8.1 11.3 12.8 17.7 12.9 17.7 28.3 38.9 39.8 59.8 10.4 19 15.7 38.8 18.3 57.5l-48.7.1c-2.2-12-5.9-23.7-11.8-34.5-9.9-18-22.2-34.9-34.5-51.8-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176 16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3-5 7.2-10.2 14.3-15.4 21.4-12.3 16.8-24.6 33.7-34.5 51.8-5.9 10.8-9.6 22.5-11.8 34.5h-48.6c2.6-18.7 7.9-38.6 18.3-57.5 11.5-20.9 26.9-42.1 39.8-59.8 4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48 0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80 8.8 0 16 7.2 16 16s-7.2 16-16 16m0 384c-44.2 0-80-35.8-80-80v-16h160v16c0 44.2-35.8 80-80 80"/></svg>');}</style>



    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/neoteroi-mkdocs.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
  
      

    

  
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.body.addEventListener("click", function(ev) {
        if (ev.target instanceof HTMLElement) {
          var el = ev.target.closest("a[href^=http]")
          if (el)
            ga("send", "event", "outbound", "click", el.href)
        }
      })
    })
  </script>

    
    

  
  
  
    
  

  
  

  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="LUMI training materials - LUMI Software Stacks" />
  <meta property="og:description" content="None" />
  <meta property="og:url" content="https://lumi-supercomputer.github.io/LUMI-training-materials/4day-20230530/notes_2_05_LUMI_Software_Stacks/" />
  <meta property="og:image" content="https://lumi-supercomputer.github.io/LUMI-training-materials/assets/images/banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1080" />
  <meta property="og:image:height" content="568" />

  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@LUMIhpc" />
  <meta name="twitter:creator" content="@LUMIhpc" />
  <meta name="twitter:title" content="LUMI training materials - LUMI Software Stacks" />
  <meta name="twitter:description" content="None" />
  <meta name="twitter:image" content="https://lumi-supercomputer.github.io/LUMI-training-materials/assets/images/banner.png" />

  <style>
    [data-md-color-primary="lumi"] {
      --md-primary-fg-color: hsla(0, 0%, 100%, 1);
      --md-primary-fg-color--light: hsla(0, 0%, 100%, 0.7);
      --md-primary-fg-color--dark: hsla(0, 0%, 0%, 0.07);
      --md-primary-bg-color: hsla(0, 0%, 0%, 0.87);
      --md-primary-bg-color--light: hsla(0, 0%, 0%, 0.54);
      --md-button-bg-color: hsla(207,100%,28%, 1);
      --md-button-bg-color--light: hsla(207,100%,38%, 1);
      --md-typeset-a-color: hsla(207,100%,28%, 1);
    }
    
    [data-md-color-accent="lumi"] {
      --md-accent-fg-color: hsla(0,0%,0%, 1);
      --md-accent-fg-color--transparent: hsla(0,0%,0%, 0.1);
      --md-accent-bg-color: hsla(0, 0%, 100%, 1);
      --md-accent-bg-color--light: hsla(0, 0%, 100%, 0.7);
    }
  </style>

  


  
  

    <link
      rel="stylesheet"
      href="../../assets/stylesheets/extra-50959fdd9a.css"
    />
    <link
      rel="stylesheet"
      href="../../assets/stylesheets/overrides-5193e6f6df.css"
    />
    <link
      rel="stylesheet"
      id="typekit-fonts-css"
      href="https://use.typekit.net/nlo5lta.css?ver=5.5.3"
      type="text/css" media="all"
    />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="lumi" data-md-color-accent="lumi">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lumi-software-stacks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LUMI training materials" class="md-header__button md-logo" aria-label="LUMI training materials" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 723 212" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g id="Layer-2" serif:id="Layer 2">
        <g transform="matrix(1,0,0,1,0,175.883)">
            <path d="M0,-140.304L0,0L102.89,0L102.89,-24.599L26.658,-24.599L26.658,-140.304L0,-140.304Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,257.262,35.5793)">
            <path d="M0,140.304C-17.585,140.304 -32.083,135.347 -43.588,125.338C-55,115.423 -60.799,103.357 -60.799,89.14L-60.799,0L-34.328,0L-34.328,81.563C-34.328,92.413 -31.054,100.645 -24.319,105.976C-17.866,111.12 -9.728,113.74 0,113.74C9.728,113.74 17.865,111.12 24.319,105.976C31.054,100.645 34.328,92.413 34.328,81.563L34.328,0L60.799,0L60.799,89.14C60.799,103.357 55.093,115.329 43.588,125.338C32.083,135.347 17.585,140.304 0,140.304" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,550.374,119.668)">
            <path d="M0,-27.874L-43.588,20.671L-87.176,-27.874L-87.176,56.215L-113.74,56.215L-113.74,-84.089L-105.695,-84.089L-43.588,-13.47L18.614,-84.089L26.658,-84.089L26.658,56.215L0.094,56.215L0,-27.874Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <rect x="695.604" y="35.486" width="26.658" height="140.397" style="fill:rgb(29,29,27);"/>
        <g transform="matrix(-1,0,0,1,722.262,-203.194)">
            <rect x="0" y="203.194" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
        <g transform="matrix(-1,0,0,1,722.262,203.194)">
            <rect x="0" y="0" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
    </g>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LUMI training materials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              LUMI Software Stacks
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LUMI training materials" class="md-nav__button md-logo" aria-label="LUMI training materials" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 723 212" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g id="Layer-2" serif:id="Layer 2">
        <g transform="matrix(1,0,0,1,0,175.883)">
            <path d="M0,-140.304L0,0L102.89,0L102.89,-24.599L26.658,-24.599L26.658,-140.304L0,-140.304Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,257.262,35.5793)">
            <path d="M0,140.304C-17.585,140.304 -32.083,135.347 -43.588,125.338C-55,115.423 -60.799,103.357 -60.799,89.14L-60.799,0L-34.328,0L-34.328,81.563C-34.328,92.413 -31.054,100.645 -24.319,105.976C-17.866,111.12 -9.728,113.74 0,113.74C9.728,113.74 17.865,111.12 24.319,105.976C31.054,100.645 34.328,92.413 34.328,81.563L34.328,0L60.799,0L60.799,89.14C60.799,103.357 55.093,115.329 43.588,125.338C32.083,135.347 17.585,140.304 0,140.304" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,550.374,119.668)">
            <path d="M0,-27.874L-43.588,20.671L-87.176,-27.874L-87.176,56.215L-113.74,56.215L-113.74,-84.089L-105.695,-84.089L-43.588,-13.47L18.614,-84.089L26.658,-84.089L26.658,56.215L0.094,56.215L0,-27.874Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <rect x="695.604" y="35.486" width="26.658" height="140.397" style="fill:rgb(29,29,27);"/>
        <g transform="matrix(-1,0,0,1,722.262,-203.194)">
            <rect x="0" y="203.194" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
        <g transform="matrix(-1,0,0,1,722.262,203.194)">
            <rect x="0" y="0" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
    </g>
</svg>

    </a>
    LUMI training materials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../User-Updates/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Updates
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../User-Updates/Update-202409/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    August-September 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            August-September 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202409/202409_FAQ/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202409/202409_Documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation links
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202311/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    October-November 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../User-Updates/Update-202308/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    August 2023
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            August 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202308/lumig-lownoise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Low-noise mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202308/lumig-devg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dev-g and eap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../User-Updates/Update-202308/responsible-use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Responsible use
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../User-Coffee-Breaks/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Coffee Breaks
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Coffee Breaks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../2p3day-20250303/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    LUMI intensive March 2025
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            LUMI intensive March 2025
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2p3day-20250303/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2p3day-20250303/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai-20250204/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AI workshop February 2025
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            AI workshop February 2025
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-20250204/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-20250204/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../2day-20241210/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Supercomputing with LUMI December 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Supercomputing with LUMI December 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2day-20241210/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2day-20241210/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../4day-20241028/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced LUMI October 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Advanced LUMI October 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4day-20241028/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4day-20241028/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Hackathon-20241014/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Hackathon October 2024
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Hackathon October 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Profiling-20241009/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Profiling October 2024
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Profiling October 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../paow-20240611/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Performance Analysis & Optimization June 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Performance Analysis & Optimization June 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paow-20240611/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paow-20240611/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Partner courses
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Partner courses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://zenodo.org/records/10610643" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GROMACS workshop 2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai-20241126/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AI workshop November 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_1" id="__nav_12_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_1">
            <span class="md-nav__icon md-icon"></span>
            AI workshop November 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-20241126/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-20241126/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../2day-20240502/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Supercomputing with LUMI May 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_2" id="__nav_12_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_2">
            <span class="md-nav__icon md-icon"></span>
            Supercomputing with LUMI May 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2day-20240502/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2day-20240502/index.html#course-materials" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course materials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai-20240529/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AI workshop May 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_3" id="__nav_12_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_3">
            <span class="md-nav__icon md-icon"></span>
            AI workshop May 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-20240529/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../4day-20240423/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Comprehensive LUMI April 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_4" id="__nav_12_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_4">
            <span class="md-nav__icon md-icon"></span>
            Comprehensive LUMI April 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4day-20240423/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../1day-20240208/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1-day February 2024
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_5" id="__nav_12_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_5">
            <span class="md-nav__icon md-icon"></span>
            1-day February 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_01_LUMI_Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_02_HPE_Cray_Programming_Environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPE Cray PE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_03_Modules_on_LUMI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_04_LUMI_Software_Stacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software stacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/05_Exercises_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_06_Running_Jobs_on_LUMI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/07_Exercises_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_08_Introduction_to_Lustre_and_Best_Practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O and file systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/video_09_LUMI_User_Support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20240208/A01_Documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Profiling-20231122/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Profiling November 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_6">
            <span class="md-nav__icon md-icon"></span>
            Profiling November 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../4day-20231003/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Comprehensive LUMI October 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_7">
            <span class="md-nav__icon md-icon"></span>
            Comprehensive LUMI October 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../1day-20230921/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1-day September 2023
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_8" id="__nav_12_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_8">
            <span class="md-nav__icon md-icon"></span>
            1-day September 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/01_Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/02_CPE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPE Cray PE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/03_Modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/04_Software_stacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software stacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/05_Exercises_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/06_Running_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/07_Exercises_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/08_Lustre_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O and file systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/09_LUMI_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230921/A01_Documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Comprehensive LUMI May-June 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_9">
            <span class="md-nav__icon md-icon"></span>
            Comprehensive LUMI May-June 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../1day-20230509/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1-day May 2023
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_10" id="__nav_12_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_10">
            <span class="md-nav__icon md-icon"></span>
            1-day May 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/01_Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/02_CPE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPE Cray PE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/03_Modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/04_Software_stacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software stacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/05_Exercises_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/06_Running_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/07_Exercises_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercises 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/08_Lustre_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O and file systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1day-20230509/09_LUMI_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI support
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Hackathon-20230417/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Hackathon April 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_11">
            <span class="md-nav__icon md-icon"></span>
            Hackathon April 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Profiling-20230413/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Profiling April 2013
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_12">
            <span class="md-nav__icon md-icon"></span>
            Profiling April 2013
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_13" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../4day-20230214/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Comprehensive LUMI February 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_13">
            <span class="md-nav__icon md-icon"></span>
            Comprehensive LUMI February 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_14" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../LUMI-G-20230111/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    LUMI-G January 2023
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_14">
            <span class="md-nav__icon md-icon"></span>
            LUMI-G January 2023
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_15" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../PEAP-Q-20221123/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    PEAP-Q November 2022
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_15" id="__nav_12_15_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_15">
            <span class="md-nav__icon md-icon"></span>
            PEAP-Q November 2022
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PEAP-Q-20221123/schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_16" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../LUMI-G-20220823/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    LUMI-G August 2022
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_16" id="__nav_12_16_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_16">
            <span class="md-nav__icon md-icon"></span>
            LUMI-G August 2022
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LUMI-G-20220823/hackmd_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hackmd notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_17" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../EasyBuild-CSC-20220509/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    EasyBuild May 2022
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_17" id="__nav_12_17_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_17">
            <span class="md-nav__icon md-icon"></span>
            EasyBuild May 2022
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://lumi-supercomputer.github.io/easybuild-tutorial/2022-CSC_and_LO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_18" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../PEAP-Q-20220427/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    PEAP-Q April 2022
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12_18" id="__nav_12_18_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_18">
            <span class="md-nav__icon md-icon"></span>
            PEAP-Q April 2022
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PEAP-Q-20220427/hackmd_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hackmd notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PEAP-Q-20220427/software_stacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUMI Software Stacks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-software-stacks-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      The software stacks on LUMI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The software stacks on LUMI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#design-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Design considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-lumi-solution" class="md-nav__link">
    <span class="md-ellipsis">
      The LUMI solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-policies" class="md-nav__link">
    <span class="md-ellipsis">
      Software policies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#organisation-of-the-software-in-software-stacks" class="md-nav__link">
    <span class="md-ellipsis">
      Organisation of the software in software stacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ways-to-access-the-cray-programming-environment-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      3 ways to access the Cray Programming environment on LUMI.
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 ways to access the Cray Programming environment on LUMI.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bare-environment-and-crayenv" class="md-nav__link">
    <span class="md-ellipsis">
      Bare environment and CrayEnv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lumi-stack" class="md-nav__link">
    <span class="md-ellipsis">
      LUMI stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lumi-stack-module-organisation" class="md-nav__link">
    <span class="md-ellipsis">
      LUMI stack module organisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lmod-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      Lmod on LUMI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lmod on LUMI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exploring-modules-with-lmod" class="md-nav__link">
    <span class="md-ellipsis">
      Exploring modules with Lmod
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-spider-command" class="md-nav__link">
    <span class="md-ellipsis">
      Module spider command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-keyword-command" class="md-nav__link">
    <span class="md-ellipsis">
      Module keyword command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sticky-modules-and-module-purge" class="md-nav__link">
    <span class="md-ellipsis">
      Sticky modules and module purge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-how-the-module-list-is-displayed" class="md-nav__link">
    <span class="md-ellipsis">
      Changing how the module list is displayed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easybuild-to-extend-the-lumi-software-stack" class="md-nav__link">
    <span class="md-ellipsis">
      EasyBuild to extend the LUMI software stack
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EasyBuild to extend the LUMI software stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-software-on-hpc-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Installing software on HPC systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extending-the-lumi-stack-with-easybuild" class="md-nav__link">
    <span class="md-ellipsis">
      Extending the LUMI stack with EasyBuild
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#easybuild-recipes-easyconfigs" class="md-nav__link">
    <span class="md-ellipsis">
      EasyBuild recipes - easyconfigs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-toolchain-concept" class="md-nav__link">
    <span class="md-ellipsis">
      The toolchain concept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#easyconfig-names-and-module-names" class="md-nav__link">
    <span class="md-ellipsis">
      EasyConfig names and module names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-software" class="md-nav__link">
    <span class="md-ellipsis">
      Installing software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-where-to-install" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Where to install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-configure-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Configure the environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-install-the-software" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Install the software.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-install-the-software-note" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Install the software - Note
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-advanced-work" class="md-nav__link">
    <span class="md-ellipsis">
      More advanced work
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-advanced-work-2-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      More advanced work (2): Repositories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-advanced-work-3-reproducibility" class="md-nav__link">
    <span class="md-ellipsis">
      More advanced work (3): Reproducibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#easybuild-tips-tricks" class="md-nav__link">
    <span class="md-ellipsis">
      EasyBuild tips &amp; tricks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#easybuild-training-for-advanced-users-and-developers" class="md-nav__link">
    <span class="md-ellipsis">
      EasyBuild training for advanced users and developers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#containers-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      Containers on LUMI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-do-containers-not-provide" class="md-nav__link">
    <span class="md-ellipsis">
      What do containers not provide
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#but-what-can-they-then-do-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      But what can they then do on LUMI?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Managing containers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interacting-with-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Interacting with containers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-containers-on-lumi" class="md-nav__link">
    <span class="md-ellipsis">
      Running containers on LUMI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enhancements-to-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Enhancements to the environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion-container-limitations-on-lumi-c" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion: Container limitations on LUMI-C
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="lumi-software-stacks">LUMI Software Stacks<a class="headerlink" href="#lumi-software-stacks" title="Permanent link">&para;</a></h1>
<figure style="border: 1px solid #000">
<p><img alt="What this talk is about" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia2.png" /></p>
</figure>
<p>In this part of the training, we cover:</p>
<ul>
<li>Software stacks on LUMI, where we discuss the organisation of the software stacks
    that we offer and some of the policies surrounding it</li>
<li>Advanced Lmod use to make the best out of the software stacks</li>
<li>Creating your customised environment with EasyBuild, the tool that we use to install
    most software.</li>
<li>Some remarks about using containers on LUMI.</li>
</ul>
<h2 id="the-software-stacks-on-lumi">The software stacks on LUMI<a class="headerlink" href="#the-software-stacks-on-lumi" title="Permanent link">&para;</a></h2>
<h3 id="design-considerations">Design considerations<a class="headerlink" href="#design-considerations" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Design consideration" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia3.png" /></p>
</figure>
<ul>
<li>
<p>LUMI is a <strong>very leading edge</strong> and also an <strong>inhomogeneous machine</strong>. Leading edge often implies
    <strong>teething problems</strong> and inhomogeneous doesn't make life easier either.</p>
<ol>
<li>It uses a <strong>novel interconnect</strong> which is an extension of Ethernet rather than being based on InfiniBand, 
    and that interconnect has a different software stack of your typical Mellanox InfiniBand cluster. </li>
<li>It also uses a <strong>relatively new GPU architecture</strong>, AMD CDNA2, with an immature software ecosystem. 
    The GPU nodes are really <strong>GPU-first</strong>, with the <strong>interconnect cards connected directly to the GPU packages</strong> 
    and only one CPU socket, and another feature which is relatively new: the option to use a <strong>coherent unified memory</strong>
    space between the CPU and GPUs, though of course very NUMA. This is a feature that has previously
    only been seen in some clusters with NVIDIA P100 and V100 GPUs and IBM Power 8 and 9 CPUs used
    for some USA pre-exascale systems, and of course in Apple Silicon M-series but then without the NUMA character
    (except maybe for the Ultra version that consists of two dies).</li>
<li>LUMI is also <strong>inhomogeneous</strong> because some nodes have zen2 processors while the two main compute partitions
    have zen3-based CPUs, and the compute GPU nodes have AMD GPUs while the visualisation nodes have
    NVIDIA GPUs. </li>
</ol>
<p>Given the novel interconnect and GPU we do expect that both system and application
software will be immature at first and <strong>evolve quickly</strong>, hence we needed a setup that enables us
to remain very agile, which leads to different compromises compared to a software stack for a more
conventional and mature system as an x86 cluster with NVIDIA GPUs and Mellanox InfiniBand.</p>
</li>
<li>
<p>Users also come to LUMI from <strong>11 different channels</strong>, not counting subchannels as some countries have
    multiple organisations managing allocations, and those channels all have different expectations about
    what LUMI should be and what kind of users should be served. For our major stakeholder, the EuroHPC JU,
    LUMI is a pre-exascale system meant to prepare users and applications to make use of future even large
    systems, while some of the LUMI consortium countries see LUMI more as an extension of their tier-1 or
    even tier-2 machines.</p>
</li>
<li>
<p>The central support team of LUMI is also <strong>relatively small compared to the nature of LUMI</strong> with its
    many different partitions and storage services and the expected number of projects and users. 
    Support from users coming in via the national channels will rely a lot on efforts from <strong>local organisations</strong>
    also. <strong>So we must set up a system so that they can support their users without breaking things on
    LUMI, and to work with restricted rights.</strong> And in fact, LUMI User Support team members also have very limited additional
    rights on the machine compared to regular users or support people from the local organisations.
    LUST is currently 9 FTE. Compare this to 41 people in the Jlich Supercomputer Centre for software
    installation and support only... (I give this number because it was mentioned in a a talk in the
    EasyBuild user meeting in 2022.)</p>
</li>
<li>
<p>The Cray Programming Environment is also a <strong>key part of LUMI</strong> and the environment for which we get
    support from HPE Cray. It is however different from more traditional environments such as a typical
    Intel oneAPI installation of a typical installation build around the GNU Compiler Collection and Open MPI
    or MPICH. The programming environment is <strong>installed with the operating system</strong> rather than through the
    user application software stack hence not managed through the tools used for the application software
    stack, and it also works differently with its <strong>universal compiler wrappers</strong> that are typically configured
    through modules. </p>
</li>
<li>
<p>We also see an increasing <strong>need for customised setups</strong>. Everybody wants a central stack as long as their
    software is in there but not much more as otherwise it is hard to find, and as long as software is 
    configured in the way they are used to. And everybody would like LUMI to look as much as possible 
    as their home system. But this is of course impossible. Moreover, there are more and more conflicts
    between software packages and modules are only a partial solution to this problem. The success of
    containers, conda and Python virtual environments is certainly to some extent explained by the 
    need for more customised setups and the need for multiple setups as it has become nearly impossible
    to combine everything in a single setup due to conflicts between packages and the dependencies they need.</p>
</li>
</ul>
<h3 id="the-lumi-solution">The LUMI solution<a class="headerlink" href="#the-lumi-solution" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="The LUMI solution" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia4.png" /></p>
</figure>
<p>We tried to take all these considerations into account and came up with a solution that may look <strong>a
little unconventional</strong> to many users, but one that is followed by more and more big centres.</p>
<p>In principle there should be a high degree of compatibility between releases of the HPE Cray Programming
Environment but we decided not to take the risk and <strong>build our software for a specific release of the 
programming environment</strong>, which is also a better fit with the typical tools used to manage a scientific 
software stack such as EasyBuild and Spack as they also prefer precise versions for all dependencies and
compilers etc. This did turn out to be a good decision after the system update of March 2023 as some
packages were incapable of picking up new libraries.
We also made the stack very easy to extend. So we have <strong>many base libraries and some packages
already pre-installed</strong> but also provide an <strong>easy and very transparent way to install additional packages in
your project space in exactly the same way as we do for the central stack</strong>, with the same performance but the
benefit that the installation can be customised more easily to the needs of your project. Not everybody needs
the same configuration of GROMACS or LAMMPS or other big packages, and in fact a one-configuration-that-works-for-everybody
may even be completely impossible due to conflicting options that cannot be used together.</p>
<p>For the <strong>module system</strong> we could chose between two systems supported by HPE Cray. They support 
Environment Modules with module files based on the TCL scripting language, but only the old version
that is no longer really developed and not the newer versions 4 and 5 developed in France, and Lmod,
a module system based on the LUA scripting language that also support many TCL module files through a
translation layer. <strong>We chose to go with Lmod</strong> as LUA is an easier and more modern language to work with
and as Lmod is much more powerful than Environment Modules 3, certainly for <strong>searching modules</strong>.</p>
<p>To manage the software installations we could chose between EasyBuild, which is mostly developed in
Europe and hence a good match with a EuroHPC project as EuroHPC wants to develop a European HPC technology stack
from hardware to application software, and Spack, a package developed in the USA national labs.
We chose to go with <strong>EasyBuild as our primary tool</strong> for which we also do some development. 
However, as we shall see, our EasyBuild installation is not your typical EasyBuild installation
that you may be accustomed with from clusters at your home institution. <strong>It uses toolchains
specifically for the HPE Cray programming environment</strong> so recipes need to be adapted. We do offer an
<strong>growing library of Cray-specific installation recipes</strong> though.
The whole setup of EasyBuild is done such that you can build on top of the central software stack
and such that <strong>your modules appear in your module view</strong> without having to add directories by hand
to environment variables etc. You only need to point to the place where you want to install software
for your project as we cannot automatically determine a suitable place. <strong>We do offer some help so set up
Spack also but it is mostly offered "as is" an we will not do bug-fixing or development in Spack
package files.</strong></p>
<h3 id="software-policies">Software policies<a class="headerlink" href="#software-policies" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Software policies" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia5.png" /></p>
</figure>
<p>As any site, we also have a number of policies about software installation, and we're still further
developing them as we gain experience in what we can do with the amount of people we have and what we
cannot do.</p>
<p>LUMI uses a <strong>bring-your-on-license model except for a selection of tools that are useful to a larger
community</strong>. </p>
<ul>
<li>This is partly caused by the <strong>distributed user management</strong> as we do not even have the necessary
    information to determine if a particular user can use a particular license, so we must shift that 
    responsibility to people who have that information, which is often the PI of your project.</li>
<li>You also have to take into account that <strong>up to 20% of LUMI is reserved for industry</strong> use which makes 
    negotiations with software vendors rather difficult as they will want to push us onto the industrial
    rather than academic pricing as they have no guarantee that we will obey to the academic license
    restrictions. </li>
<li>And lastly, <strong>we don't have an infinite budget</strong>. There was a questionnaire send out to 
    some groups even before the support team was assembled and that contained a number of packages that
    by themselves would likely consume our whole software budget for a single package if I look at the 
    size of the company that produces the package and the potential size of their industrial market. 
    So we'd have to make choices and with any choice for a very specialised package you favour a few 
    groups. And there is also a political problem as without doubt the EuroHPC JU would prefer that we
    invest in packages that are developed by European companies or at least have large development
    teams in Europe.</li>
</ul>
<p>The LUMI User Support Team <strong>tries to help with installations of recent software</strong> but <strong>porting or bug
correction in software is not our task</strong>. As a user, you have to realise that <strong>not all Linux or even
supercomputer software will work on LUMI</strong>. This holds even more for software that comes only as
a binary. The <strong>biggest problems are the GPU and anything that uses distributed memory</strong> and requires
high performance from the interconnect. For example,</p>
<ul>
<li>software that use NVIDIA proprietary programming models and
    libraries needs to be ported. </li>
<li>Binaries that do only contain NVIDIA code paths, even if the programming
    model is supported on AMD GPUs, will not run on LUMI. </li>
<li>The LUMI interconnect requires <strong>libfabric</strong>
    using a specific provider for the NIC used on LUMI, the so-called Cassini provider, 
    so any software compiled with an MPI library that
    requires UCX, or any other distributed memory model build on top of UCX, will not work on LUMI, or at
    least not work efficiently as there might be a fallback path to TCP communications. </li>
<li>Even intra-node interprocess communication can already cause problems as there are three different kernel extensions
    that provide more efficient interprocess messaging than the standard Linux mechanism. Many clusters
    use <strong>knem</strong> for that but on LUMI <strong>xpmem</strong> is used. So software that is not build to support xpmem will
    also fall back to the default mechanism or fail. </li>
<li>Also, the MPI implementation needs to <strong>collaborate
    with certain modules in our Slurm installation</strong> to start correctly and experience has shown that this
    can also be a source of trouble as the fallback mechanisms that are often used do not work on LUMI. </li>
<li><strong>Containers solve none of these problems</strong>. There can be more subtle compatibility problems also. 
    As has been discussed earlier in the course, LUMI runs SUSE Linux and not Ubuntu which is popular on 
    workstations or a Red Hat-derived Linux popular on many clusters. Subtle differences between Linux 
    versions can cause compatibility problems that in some cases can be solved with containers. But containers
    won't help you if they are build for different kernel extensions and hardware interfaces.</li>
<li>The <strong>compute nodes also lack some Linux daemons</strong> that may be present on smaller clusters. HPE Cray use an
    optimised Linux version called COS or Cray Operating System on the compute nodes. It is optimised to
    reduce OS jitter and hence to enhance scalability of applications as that is after all the primary
    goal of a pre-exascale machine. But that implies that certain Linux daemons that your software may 
    expect to find are not present on the compute nodes. D-bus comes to mind.</li>
</ul>
<p>Also, the LUMI user support team is <strong>too small to do all software installations</strong> which is why we currently
state in our policy that a LUMI user should be capable of installing their software themselves or have
another support channel. We cannot install every single piece of often badly documented research-quality
code that was never meant to be used by people who don't understand the code.</p>
<p>Another soft compatibility problem that I did not yet mention is that software that <strong>accesses tens
of thousands of small files and abuses the file system as a database</strong> rather than using structured
data formats designed to organise data on supercomputers is not welcome on LUMI. For that reason we
also require to <strong>containerize conda and Python installations</strong>. We do offer a container-based wrapper
that offers a way to install conda packages or to install Python packages with pip on top of 
the Python provided by the <code>cray-python</code> module. On LUMI the tool is called
<a href="https://docs.lumi-supercomputer.eu/software/installing/container_wrapper/">lumi-container-wrapper</a>
but it may by some from CSC also be known as Tykky.</p>
<h3 id="organisation-of-the-software-in-software-stacks">Organisation of the software in software stacks<a class="headerlink" href="#organisation-of-the-software-in-software-stacks" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Organisation: Software stacks" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia6.png" /></p>
</figure>
<p>On LUMI we have several software stacks.</p>
<p><strong>CrayEnv</strong> is the software stack for users who only need the <strong>Cray Programming Environment</strong> but want a <strong>more
recent set of build tools etc</strong> than the OS provides. We also take care of a few issues that we will discuss
on the next slide that are present right after login on LUMI.</p>
<p>Next we have the <strong>stacks called "LUMI"</strong>. Each one corresponds to a <strong>particular release of the HPE Cray
Programming Environment</strong>. It is the stack in which we install software using that programming environment
and mostly EasyBuild. <strong>The Cray Programming Environment modules are still used, but they are accessed through
a replacement for the PrgEnv modules that is managed by EasyBuild</strong>. We have <strong>tuned versions for the 3 types
of hardware in the regular LUMI system</strong>: zen2 CPUs in the login nodes and large memory nodes, zen3 for the 
LUMI-C compute nodes and zen3 + MI250X for
the LUMI-G partition. We were also planning to have a fourth version for the visualisation nodes with 
zen2 CPUs combined with NVIDIA GPUs, but that may never materialise and we may manage those differently.</p>
<p>In the far future we will also look at <strong>a stack based on the common EasyBuild toolchains as-is</strong>, but we do expect
problems with MPI that will make this difficult to implement, and the common toolchains also do not yet support
the AMD GPU ecosystem, so we make no promises whatsoever about a time frame for this development.</p>
<p>We also have an extensible software stack based on <strong>Spack</strong> which has been pre-configured to use the compilers
from the Cray PE. This stack is offered as-is for users who know how to use Spack, but we don't offer much
support nor do we do any bugfixing in Spack.</p>
<h3 id="3-ways-to-access-the-cray-programming-environment-on-lumi">3 ways to access the Cray Programming environment on LUMI.<a class="headerlink" href="#3-ways-to-access-the-cray-programming-environment-on-lumi" title="Permanent link">&para;</a></h3>
<h4 id="bare-environment-and-crayenv">Bare environment and CrayEnv<a class="headerlink" href="#bare-environment-and-crayenv" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="Accessing the Cray PE: BAre and CrayEnv" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia7.png" /></p>
</figure>
<p>Right after login you have a <strong>very bare environment available with the Cray Programming Environment
with the PrgEnv-cray module loaded</strong>. It gives you basically <strong>what you can expect on a typical Cray system</strong>.
There aren't many tools available, basically <strong>mostly only the tools in the base OS image and some tools that
we are sure will not impact software installed in one of the software stacks</strong>.
The set of target modules loaded is the one for the login nodes and not tuned to any particular node type.
<strong>As a user you're fully responsible for managing the target modules</strong>, reloading them when needed or loading the
appropriate set for the hardware you're using or want to cross-compile for.</p>
<p>The <strong>second way</strong> to access the Cray Programming Environment is through the <strong>CrayEnv software stack</strong>. This stack
offers an <strong>"enriched" version of the Cray environment</strong>. It <strong>takes care of the target modules</strong>: Loading or reloading
CrayEnv will reload an optimal set of target modules for the node you're on. It also provides <strong>some additional 
tools</strong> like newer build tools than provided with the OS. They are offered here and not in the bare environment to be
sure that those tools don't create conflicts with software in other stacks. But otherwise the Cray Programming 
Environment <strong>works exactly as you'd expect from this course</strong>.</p>
<h4 id="lumi-stack">LUMI stack<a class="headerlink" href="#lumi-stack" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="Accessing the Cray PE: LUMI stack" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia8.png" /></p>
</figure>
<p>The <strong>third way</strong> to access the Cray Programming Environment is through the <strong>LUMI software stacks</strong>, where each stack
is <strong>based on a particular release of the HPE Cray Programming Environment</strong>. We advise against mixing with modules
that came with other versions of the Cray PE, but they <strong>remain accessible</strong> although they are hidden from the default
view for regular users. It ia also better to <strong>not use the PrgEnv modules, but the equivalent LUMI EasyBuild 
toolchains</strong> instead as indicated by the following table:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">HPE Cray PE</th>
<th style="text-align: left;">LUMI toolchain</th>
<th style="text-align: left;">What?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>PrgEnv-cray</code></td>
<td style="text-align: left;"><code>cpeCray</code></td>
<td style="text-align: left;">Cray Compiler Environment</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-gnu</code></td>
<td style="text-align: left;"><code>cpeGNU</code></td>
<td style="text-align: left;">GNU C/C++ and Fortran</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-aocc</code></td>
<td style="text-align: left;"><code>cpeAOCC</code></td>
<td style="text-align: left;">AMD CPU compilers (login nodes and LUMI-C only)</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-amd</code></td>
<td style="text-align: left;"><code>cpeAMD</code></td>
<td style="text-align: left;">AMD ROCm GPU compilers (LUMI-G only)</td>
</tr>
</tbody>
</table>
<p>The cpeCray etc modules also load the MPI libraries and Cray LibSci just as the PrgEnv modules do.
And we sometimes use this to work around problems in Cray-provided modules that we cannot change. </p>
<p>This is also the environment in which we install most software, and from the name of the modules you can see which
compilers we used.</p>
<h4 id="lumi-stack-module-organisation">LUMI stack module organisation<a class="headerlink" href="#lumi-stack-module-organisation" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="The LUMI software stack" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia9.png" /></p>
</figure>
<p>To manage the heterogeneity in the hardware, the LUMI software stack uses <strong>two levels of modules</strong></p>
<p>First there are the <strong>LUMI/22.08, LUMI/22.12 and LUMI/23.03 modules</strong>. Each of the LUMI modules loads a particular
version of the LUMI stack.</p>
<p>The <strong>second level consists of partition modules</strong>. There is partition/L for the login and large memory nodes,
partition/C for the regular compute nodes and partition/G for the AMD GPU nodes.
We may have a separate partition for the visualisation nodes in the future but that is not clear yet.</p>
<p>There is also a <strong>hidden partition/common module</strong> in which we install software that is available everywhere, 
but we advise you to be careful to install software in there in your own installs as it is risky to rely on
software in one of the regular partitions, and impossible in our EasyBuild setup.</p>
<p>The LUMI module will <strong>automatically load the best partition module</strong> for the current hardware whenever it
is loaded or reloaded. So if you want to cross-compile, you can do so by loading a different partition 
module after loading the LUMI module, but you'll have to reload every time you reload the LUMI module.</p>
<p>Hence you should also <strong>be very careful in your job scripts</strong>. On LUMI the environment from the login nodes
is used when your job starts, so unless you switched to the suitable partition for the compute nodes,
your job will start with the software stack for the login nodes. If in your job script you reload the 
LUMI module it will instead switch to the software stack that corresponds to the type of compute node
you're using and more optimised binaries can be available. If for some reason you'd like to use the
same software on LUMI-C and on the login or large memory nodes and don't want two copies of locally
installed software, you'll have to make sure that after reloading the LUMI module in your job script you
explicitly load the partition/L module.</p>
<h2 id="lmod-on-lumi">Lmod on LUMI<a class="headerlink" href="#lmod-on-lumi" title="Permanent link">&para;</a></h2>
<h3 id="exploring-modules-with-lmod">Exploring modules with Lmod<a class="headerlink" href="#exploring-modules-with-lmod" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Exploring modules with Lmod" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia10.png" /></p>
</figure>
<p>Contrary to some other module systems, or even some other Lmod installations, <strong>not all modules are
immediately available for loading</strong>. So don't be disappointed by the few modules you will see with
<code>module available</code> right after login. Lmod has a <strong>so-called hierarchical setup</strong> that tries to protect
you from being confronted with all modules at the same time, even those that may conflict with 
each other, and we use that to some extent on LUMI. Lmod <strong>distinguishes between installed modules and
available modules</strong>. Installed modules are all modules on the system that can be loaded one way or
another, sometimes through loading other modules first. Available modules are all those modules
that can be loaded at a given point in time without first loading other modules.</p>
<p>The HPE Cray Programming Environment also uses a hierarchy though it is not fully implemented in
the way the Lmod developer intended so that some features do not function as they should.</p>
<ul>
<li>For example, <strong>the <code>cray-mpich</code> module</strong> can only be loaded if <strong>both a network target module and a
    compiler module</strong> are loaded (and that is already the example that is implemented differently from
    what the Lmod developer had in mind). </li>
<li>Another example is the <strong>performance monitoring tools.</strong> Many of those
    tools only become available after loading the <code>perftools-base</code> module. </li>
<li>Another example is the
    <strong><code>cray-fftw</code></strong> module which requires a <strong>processor target module</strong> to be loaded first.</li>
</ul>
<p>Lmod has <strong>several tools to search for modules</strong>. </p>
<ul>
<li>The <code>module avail</code> command is one that is also
    present in the various Environment Modules implementations and is the command to search in the
    available modules. </li>
<li>But Lmod also has other commands, <code>module spider</code> and <code>module keyword</code>, to 
    search in the list of installed modules.</li>
</ul>
<h3 id="module-spider-command">Module spider command<a class="headerlink" href="#module-spider-command" title="Permanent link">&para;</a></h3>
<p><strong><em>Demo moment 1 (when infrastructure for a demo is available)</em></strong></p>
<figure style="border: 1px solid #000">
<p><img alt="module spider" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia11.png" /></p>
</figure>
<p>(The content of this slide is really meant to be shown in practice on a command line.)</p>
<p>There are three ways to use <code>module spider</code>, discovering software in more and more detail.</p>
<ol>
<li>
<p><code>module spider</code> by itself will show a list of all installed software with a short description.
    Software is bundled by name of the module, and it shows the description taken from the default
    version. <code>module spider</code> will also look for "extensions" defined in a module and show those also
    and mark them with an "E". Extensions are a useful Lmod feature to make clear that a module offers
    features that one would not expect from its name. E.g., in a Python module the extensions could be
    a list of major Python packages installed in the module which would allow you to find <code>NumPy</code> if
    it were hidden in a module with a different name. This is also a very useful feature to make
    tools that are bundled in one module to reduce the module clutter findable.</p>
</li>
<li>
<p><code>module spider</code> with the name of a package will show all versions of that package installed on
    the system. This is also case-insensitive. Let's try for instance <code>module spider gnuplot</code>. This
    will show 17 versions of GNUplot. There are 12 installations of GNUplot 5.4.3 (of which 3 with Spack,
    their name has a different structure) and five of 5.4.6. The 
    remainder of the name shows us with what compilers gnuplot was compiled. The reason to have 
    versions for two or three compilers is that no two compiler modules can be loaded simultaneously,
    and this offers a solution to use multiple tools without having to rebuild your environment for
    every tool, and hence also to combine tools. </p>
<p>Now try <code>module spider CMake</code>. We see that there are four versions,3.22.2, 3.23.2, 3.24.0 and 3.25.2, 
that are shown in blue with an "E" behind the name. That is because these are not provided 
by a module called
<code>CMake</code> on LUMI, but by another module that in this case contains
a collection of popular build tools and that we will discover shortly.</p>
<p>There are also a couple of regular modules called <code>cmake</code> that come from software installed
differently.</p>
</li>
<li>
<p>The third use of <code>module spider</code> is with the full name of a module. Try for instance
    <code>module spider gnuplot/5.4.6-cpeGNU-22.12</code>. This will now show full help information for
    the specific module, including what should be done to make the module available. For 
    this GNUplot module we see that there are three ways to load the module: By loading <code>LUMI/22.12</code> 
    combined with <code>partition/C</code>, by loading <code>LUMI/22.12</code> combined with <code>partition/G</code>
    or by loading <code>LUMI/22.12</code> combined with <code>partition/L</code>. So use only
    a single line, but chose it in function of the other modules that you will also need. In this case
    it means that that version of GNUplot is available in the <code>LUMI/22.12</code> stack which we could already
    have guessed from its name, with binaries for the login and large memory nodes and the LUMI-C compute
    partition. This does however not always work with the Cray Programming Environment modules.</p>
<p>We can also use <code>module spider</code> with the name and version of an extension. So try
<code>module spider CMake/3.25.2</code>. This will now show us that this tool is in the <code>buildtools/22.12</code>
module (among others) and give us 4 different options to load that module as it is provided in the <code>CrayEnv</code>
and the <code>LUMI/22.12</code> software stacks and for all partitions (basically because we don't do
processor-specific optimisations for these tools).</p>
</li>
</ol>
<details class="demo" open="open">
<summary>Demo module spider</summary>
<p>Try the following commands:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>spider
module<span class="w"> </span>spider<span class="w"> </span>gnuplot
module<span class="w"> </span>spider<span class="w"> </span>cmake
module<span class="w"> </span>spider<span class="w"> </span>gnuplot/5.4.6-cpeGNU-22.12
module<span class="w"> </span>spider<span class="w"> </span>CMake/3.25.2
</code></pre></div>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 1" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia12.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia13.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 3" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia14.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia15.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 5" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia16.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 6" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia17.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 7" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia18.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 8" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia19.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 9" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia20.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module spider demo slide 10" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia21.png" />
</figure></p>
</details>
<h3 id="module-keyword-command">Module keyword command<a class="headerlink" href="#module-keyword-command" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="module keyword command" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia22.png" /></p>
</figure>
<p>Lmod has a second way of searching for modules: <code>module keyword</code>, but unfortunately it does not
yet work very well on LUMI as the version of Lmod is rather old and still has some bugs in the
processing of the command. </p>
<p>The <code>module keyword</code> command searches in some of the information included in module files for the
given keyword, and shows in which modules the keyword was found.</p>
<p>We do an effort to put enough information in the modules to make this a suitable additional way
to discover software that is installed on the system.</p>
<details class="demo" open="open">
<summary>Demo module keyword</summary>
<p>Try the following command:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>keyword<span class="w"> </span>https
</code></pre></div>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module keyword demo slide 1" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia23.png" />
</figure></p>
<p>The bug in the Lmod 8.3 version on LUMI is that all extensions are shown in the output 
while they are irrelevant. </p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module keyword demo slide 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia24.png" />
</figure></p>
<p>On the second screen though we see <code>cURL</code> which is a tool to download files over,
among others, https.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module keyword demo slide 3" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia25.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module keyword demo slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia26.png" />
</figure></p>
<p>And the fourth screen <code>wget</code> which is also a tool to download files from the internet
over an https connection.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module keyword demo slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia27.png" />
</figure></p>
</details>
<h3 id="sticky-modules-and-module-purge">Sticky modules and module purge<a class="headerlink" href="#sticky-modules-and-module-purge" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Sticky modules and module purge" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia28.png" /></p>
</figure>
<p>On some systems you will be taught to avoid <code>module purge</code> as many HPC systems do their default user
configuration also through modules. This advice is often given on Cray systems as it is a common
practice to preload a suitable set of target modules and a programming environment.
On LUMI both are used. A default programming environment and set of target modules suitable for the
login nodes is preloaded when you log in to the system, and next the <code>init-lumi</code> module is loaded
which in turn makes the LUMI software stacks available that we will discuss in the next session.</p>
<p>Lmod however has a trick that help to avoid removing necessary modules and it is called sticky modules.
When issuing the <code>module purge</code> command these modules are automatically reloaded. It is very important to
realise that those modules will not just be kept "as is" but are in fact unloaded and loaded again as
we shall see later that this may have consequences. It is still possible to force unload all these modules
using <code>module --force purge</code> or selectively unload those using <code>module --force unload</code>.</p>
<p>The sticky property is something that is defined in the module file and not used by the module files
ot the HPE Cray Programming Environment, but we shall see that there is a partial workaround for this in
some of the LUMI software stacks. The <code>init-lumi</code> module mentioned above though is a sticky module, as are
the modules that activate a software stack so that you don't have to start from scratch if you have already
chosen a software stack but want to clean up your environment.</p>
<details class="demo" open="open">
<summary>Demo</summary>
<p>Try the following command:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>av
</code></pre></div>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 1" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia29.png" />
</figure></p>
<p>Note the very descriptive titles in the above screenshot.</p>
<p>The letter "D" next to a name denotes that this is the default version,
the letter "L" denotes that the module is loaded, but we'll come back to 
that later also.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia30.png" />
</figure></p>
<p>Note the two categories for the PE modules. The target modules get their own block.
The screen below also shows <code>(D:5.0.2:5.2.0)</code> next to the <code>rocm</code> module. 
The <code>D</code> means that this version of the module, <code>5.2.3</code>, is currently the default on
the system. The two version numbers next to this module show that the module can also 
be loaded as <code>rocm/5.0.2</code> and <code>rocm/5.2.0</code>. These are two modules that were removed
from the system during the last update of the system, but version 5.2.3 can be loaded
as a replacement of these modules so that software that used the removed modules may
still work without recompiling.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 3" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia31.png" />
</figure></p>
<p>In the next screen we see the modules for the software stack that we have just discussed.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia32.png" />
</figure></p>
<p>And the screen below shows the extensions of modules (like the CMake tool we've tried to locate
before)</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia33.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="module av slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia34.png" />
</figure></p>
<p>At the end of the output we also get some information about the meaning of the 
letters used in the display.</p>
<p>Try the following commands and carefully observe the output:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>LUMI/22.08<span class="w"> </span>buildtools
module<span class="w"> </span>list
module<span class="w"> </span>purge
module<span class="w"> </span>list
module<span class="w"> </span>--force<span class="w"> </span>unload<span class="w"> </span>ModuleLabel/label
module<span class="w"> </span>list
</code></pre></div>
</details>
<p>The sticky property has to be declared in the module file so we cannot add it to for instance the
Cray Programming Environment target modules, but we can and do use it in some modules that we control
ourselves. <strong>We use it on LUMI for the software stacks themselves and for the modules that set the
display style of the modules</strong>. </p>
<ul>
<li>In the <code>CrayEnv</code> environment, <code>module purge</code> will clear the target
    modules also but as <code>CrayEnv</code> is not just left untouched but reloaded instead, the load of <code>CrayEnv</code>
    will load a suitable set of target modules for the node you're on again. But any customisations that
    you did for cross-compiling will be lost. </li>
<li>Similarly in the LUMI stacks, as the <code>LUMI</code> module itself
    is reloaded, it will also reload a partition module. However, that partition module might not be the 
    one that you had loaded but it will be the one that the LUMI module deems the best for the node you're
    on, and you may see some confusing messages that look like an error message but are not.</li>
</ul>
<h3 id="changing-how-the-module-list-is-displayed">Changing how the module list is displayed<a class="headerlink" href="#changing-how-the-module-list-is-displayed" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Changing how the module list is displayed" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia35.png" /></p>
</figure>
<p>You may have noticed already that by default you <strong>don't see the directories in which the module
files reside</strong> as is the case on many other clusters. Instead we try to show <strong>labels that tell you
what that group of modules actually is</strong>. And sometimes this also combines modules from multiple
directories that have the same purpose. For instance, in the default view we collapse all modules
from the Cray Programming Environment in two categories, the target modules and other programming
environment modules. But you can <strong>customise this by loading one of the <code>ModuleLabel</code> modules</strong>.
One version, the <code>label</code> version, is the default view. But we also have <code>PEhierarchy</code> which 
still provides descriptive texts but unfolds the whole hierarchy in the Cray Programming 
Environment. And the third style is called <code>system</code> which shows you again the module directories.</p>
<details class="demo" open="open">
<summary>Demo</summary>
<p>Try the following commands:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>list
module<span class="w"> </span>avail
module<span class="w"> </span>load<span class="w"> </span>ModuleLabel/PEhiererachy
module<span class="w"> </span>avail
module<span class="w"> </span>load<span class="w"> </span>ModuleLabel/system
module<span class="w"> </span>avail
module<span class="w"> </span>load<span class="w"> </span>ModuleLabel/label
</code></pre></div>
</details>
<p>We're also very much aware that the default colour view is not good for everybody. So far we are not 
aware of an easy way to provide various colour schemes as one that is OK for people who like a black 
background on their monitor might not be OK for people who prefer a white background. But it is possible
to turn colour off alltogether by loading the <code>ModuleColour/off</code> module, and you can always turn it
on again with <code>ModuleColour/on</code>.</p>
<details class="demo" open="open">
<summary>Demo</summary>
<p>Try the following commands:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>avail
module<span class="w"> </span>load<span class="w"> </span>ModuleColour/off
module<span class="w"> </span>avail
module<span class="w"> </span>list
module<span class="w"> </span>load<span class="w"> </span>ModuleColour/on
</code></pre></div>
</details>
<p>We also <strong>hide some modules from regular users</strong> because we think they are not useful at all for regular
users or not useful in the context you're in at the moment. For instance, when working in the <code>LUMI/22.12</code>
stack we prefer that users use the Cray programming environment modules that come with release 22.12 of that
environment, and cannot guarantee compatibility of other modules with already installed software, so
we hide the other ones from view.
You can still load them if you know they exist but 
you cannot see them with <code>module available</code>. It is possible though to still show most if not all of 
them by loading <code>ModulePowerUser/LUMI</code>. Use this at your own risk however, we will not help you to make
things work or to use any module that was designed for us to maintain the system.</p>
<details class="demo" open="open">
<summary>Demo</summary>
<p>Try the following commands:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>LUMI/22.12
module<span class="w"> </span>avail
module<span class="w"> </span>load<span class="w"> </span>ModulePowerUser
module<span class="w"> </span>avail
</code></pre></div>
<p>Note that we see a lot more Cray PE modules with <code>ModulePowerUser</code>!</p>
</details>
<h2 id="easybuild-to-extend-the-lumi-software-stack">EasyBuild to extend the LUMI software stack<a class="headerlink" href="#easybuild-to-extend-the-lumi-software-stack" title="Permanent link">&para;</a></h2>
<h3 id="installing-software-on-hpc-systems">Installing software on HPC systems<a class="headerlink" href="#installing-software-on-hpc-systems" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Installing software on HPC systems" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia36.png" /></p>
</figure>
<p>Software on HPC systems is <strong>rarely installed from RPMs</strong> for various reasons.
Generic RPMs are <strong>rarely optimised for the specific CPU</strong> of the system as they have to work on a range
of systems and including optimised code paths in a single executable for multiple architectures is
hard to even impossible. 
Secondly generic RPMs <strong>might not even work with the specific LUMI environment</strong>. They may not fully
support the SlingShot interconnect and hence run at reduced speed, or they may need particular
kernel modules or daemons that are not present on the system or they may not work well with
the resource manager on the system. We expect this to happen especially with packages that 
require specific MPI versions.
Moreover, LUMI is a <strong>multi-user system</strong> so there is usually <strong>no "one version fits all"</strong>.
And we need a <strong>small system image as nodes are diskless</strong> which means that RPMs need to be
relocatable so that they can be installed elsewhere.</p>
<p>Spack and EasyBuild are the two most popular HPC-specific software build and installation
frameworks. 
These two systems <strong>usually install packages from sources</strong> so that the software can be adapted
to the underlying hardware and operating system.
They do offer a <strong>mean to communicate and execute installation instructions easily</strong> so that in
practice once a package is well supported by these tools a regular user can install them also.
Both packages make <strong>software available via modules</strong> so that you can customise your environment
and select appropriate versions for your work. 
And they do <strong>take care of dependency handling</strong> in a way that is compatible with modules.</p>
<h3 id="extending-the-lumi-stack-with-easybuild">Extending the LUMI stack with EasyBuild<a class="headerlink" href="#extending-the-lumi-stack-with-easybuild" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="Extending the LUMI stack with EasyBuild" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia37.png" /></p>
</figure>
<p>On LUMI EasyBuild is our primary software installation tool. We selected this as there is
already a lot of experience with EasyBuild in several LUMI consortium countries and as
it is also a tool developed in Europe which makes it a nice fit with EuroHPC's goal of
creating a fully European HPC ecosystem.</p>
<p>EasyBuild is <strong>fully integrated in the LUMI software stack</strong>. Loading the LUMI module will
not only make centrally installed packages available, but also packages installed in
your personal or project stack. Installing packages in that space
is done by loading the EasyBuild-user module that will load a suitable version of
EasyBuild and configure it for installation in a way that is compatible with the
LUMI stack.
EasyBuild will then use existing modules for dependencies if those are already on the system
or in your personal or project stack.</p>
<p>Note however that the <strong>build-in easyconfig files that come with EasyBuild do not work on LUMI</strong> at
the moment.</p>
<ul>
<li>For the GNU toolchain we would have problems with MPI. EasyBuild uses Open MPI and that
    needs to be configured differently to work well on LUMI, and there are also still issues with
    getting it to collaborate with the resource manager as it is installed on LUMI.</li>
<li>The Intel-based toolchains have their problems also. At the moment, the Intel compilers with the
    AMD CPUs are a problematic cocktail. There have recently been performance and correctness problems 
    with the MKL math library and also failures with some versions of Intel MPI, 
    and you need to be careful selecting compiler options and not use <code>-xHost</code>
    or the Intel compiler will simply optimize for a two decades old CPU.</li>
</ul>
<p>Instead we make our <strong>own EasyBuild build recipes</strong> that we also make available in the 
<a href="https://github.com/Lumi-supercomputer/LUMI-EasyBuild-contrib">LUMI-EasyBuild-contrib GitHub repository</a>.
The EasyBuild configuration done by the EasyBuild-user module will find a copy of that repository
on the system or in your own install directory. The latter is useful if you always want the very
latest, before we deploy it on the system. </p>
<p>We also have the
<a href="https://lumi-supercomputer.github.io/LUMI-EasyBuild-docs/">LUMI Software Library</a>
which documents all software for which we have EasyBuild recipes available. 
This includes both the pre-installed software and the software for which we provide recipes in the
<a href="https://github.com/Lumi-supercomputer/LUMI-EasyBuild-contrib">LUMI-EasyBuild-contrib GitHub repository</a>,
and even instructions for some software that is not suitable for installation through EasyBuild or
Spack, e.g., because it likes to write in its own directories while running.</p>
<h3 id="easybuild-recipes-easyconfigs">EasyBuild recipes - easyconfigs<a class="headerlink" href="#easybuild-recipes-easyconfigs" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="EasyBuild recipes - easyconfigs" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia38.png" /></p>
</figure>
<p>EasyBuild uses a build recipe for each individual package, or better said, each individual module
as it is possible to install more than one software package in the same module. That installation
description relies on either a generic or a specific installation process provided by an easyblock.
The build recipes are called easyconfig files or simply easyconfigs and are Python files with 
the extension <code>.eb</code>. </p>
<p>The typical steps in an installation process are:</p>
<ol>
<li>Downloading sources and patches. For licensed software you may have to provide the sources as
    often they cannot be downloaded automatically.</li>
<li>A typical configure - build - test - install process, where the test process is optional and
    depends on the package providing useable pre-installation tests.</li>
<li>An extension mechanism can be used to install perl/python/R extension packages</li>
<li>Then EasyBuild will do some simple checks (some default ones or checks defined in the recipe)</li>
<li>And finally it will generate the module file using lots of information specified in the 
    EasyBuild recipe.</li>
</ol>
<p>Most or all of these steps can be influenced by parameters in the easyconfig.</p>
<h3 id="the-toolchain-concept">The toolchain concept<a class="headerlink" href="#the-toolchain-concept" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="The toolchain concept" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia39.png" /></p>
</figure>
<p>EasyBuild uses the toolchain concept. A toolchain consists of compilers, an MPI implementation
and some basic mathematics libraries. The latter two are optional in a toolchain. All these 
components have a level of exchangeability as there are language standards, as MPI is standardised,
and the math libraries that are typically included are those that provide a standard API for which
several implementations exist. All these components also have in common that it is risky to combine 
pieces of code compiled with different sets of such libraries and compilers because there can
be conflicts in names in the libraries.</p>
<p>On LUMI we don't use the standard EasyBuild toolchains but our own toolchains specifically for Cray
and these are precisely the <code>cpeCray</code>, <code>cpeGNU</code>, <code>cpeAOCC</code> and <code>cpeAMD</code> modules already mentioned 
before.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">HPE Cray PE</th>
<th style="text-align: left;">LUMI toolchain</th>
<th style="text-align: left;">What?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>PrgEnv-cray</code></td>
<td style="text-align: left;"><code>cpeCray</code></td>
<td style="text-align: left;">Cray Compiler Environment</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-gnu</code></td>
<td style="text-align: left;"><code>cpeGNU</code></td>
<td style="text-align: left;">GNU C/C++ and Fortran</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-aocc</code></td>
<td style="text-align: left;"><code>cpeAOCC</code></td>
<td style="text-align: left;">AMD CPU compilers (login nodes and LUMI-C only)</td>
</tr>
<tr>
<td style="text-align: left;"><code>PrgEnv-amd</code></td>
<td style="text-align: left;"><code>cpeAMD</code></td>
<td style="text-align: left;">AMD ROCm GPU compilers (LUMI-G only)</td>
</tr>
</tbody>
</table>
<figure style="border: 1px solid #000">
<p><img alt="The toolchain concept 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia40.png" /></p>
</figure>
<p>There is also a special toolchain called the SYSTEM toolchain that uses the compiler
provided by the operating system. This toolchain does not fully function in the same way as the other
toolchains when it comes to handling dependencies of a package and is therefore a bit harder to use.
The EasyBuild designers had in mind that this compiler would only be used to bootstrap an
EasyBuild-managed software stack, but we do use it for a bit more on LUMI as it offers us a
relatively easy way to compile some packages also for the CrayEnv stack and do this in a way
that they interact as little as possible with other software.</p>
<p>It is not possible to load packages from different cpe toolchains at the same time.
This is an EasyBuild restriction, because mixing libraries compiled with different compilers
does not always work. This could happen, e.g., if a package compiled with the Cray Compiling
Environment and one compiled with the GNU compiler collection would both use a particular 
library, as these would have the same name and hence the last loaded one would be used
by both executables (we don't use rpath or runpath linking in EasyBuild for those familiar
with that technique).</p>
<p>However, as we did not implement a hierarchy in the Lmod implementation of our software stack
at the toolchain level, the module system will not protect you from these mistakes. 
When we set up the software stack, most people in the support team considered it too misleading
and difficult to ask users to first select the toolchain they want to use and then see the 
software for that toolchain.</p>
<p>It is however possible to combine packages compiled with one CPE-based toolchain with packages
compiled with teh system toolchain, but we do avoid mixing those when linking as that may cause
problems. The reason is that we try to use as much as possible static linking in the SYSTEM
toolchain so that these packages are as independent as possible.</p>
<p>And with some tricks it might also be possible to combine packages from the LUMI software stack
with packages compiled with Spack, but one should make sure that no Spack packages are available
when building as mixing libraries could cause problems. Spack uses rpath linking which is why
this may work.</p>
<h3 id="easyconfig-names-and-module-names">EasyConfig names and module names<a class="headerlink" href="#easyconfig-names-and-module-names" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="easyconfig names and module names" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia41.png" /></p>
</figure>
<p>There is a convention for the naming of an EasyConfig as shown on the slide. This is not
mandatory, but EasyBuild will fail to automatically locate easyconfigs for dependencies 
of a package that are not yet installed if the easyconfigs don't follow the naming
convention. Each part of the name also corresponds to a parameter in the easyconfig 
file.</p>
<p>Consider, e.g., the easyconfig file <code>GROMACS-2021.4-cpeCray-22.08-PLUMED-2.8.0-CPU.eb</code>.</p>
<ol>
<li>The first part of the name, <code>GROMACS</code>, is the name of the package, specified by the
    <code>name</code> parameter in the easyconfig, and is after installation also the name of the
    module.</li>
<li>The second part, <code>2021.4</code>, is the version of GROMACS and specified by the
    <code>version</code> parameter in the easyconfig.</li>
<li>
<p>The next part, <code>cpeCray-22.08</code> is the name and version of the toolchain,
    specified by the <code>toolchain</code> parameter in the easyconfig. The version of the
    toolchain must always correspond to the version of the LUMI stack. So this is
    an easyconfig for installation in <code>LUMI/22.08</code>.</p>
<p>This part is not present for the SYSTEM toolchain</p>
</li>
<li>
<p>The final part, <code>-PLUMED-2.8.0-CPU</code>, is the version suffix and used to provide
    additional information and distinguish different builds with different options
    of the same package. It is specified in the <code>versionsuffix</code> parameter of the
    easyconfig.</p>
<p>This part is optional.</p>
</li>
</ol>
<p>The version, toolchain + toolchain version and versionsuffix together also combine
to the version of the module that will be generated during the installation process.
Hence this easyconfig file will generate the module 
<code>GROMACS/2021.4-cpeCray-22.08-PLUMED-2.8.0-CPE</code>.</p>
<h3 id="installing-software">Installing software<a class="headerlink" href="#installing-software" title="Permanent link">&para;</a></h3>
<h4 id="step-1-where-to-install">Step 1: Where to install<a class="headerlink" href="#step-1-where-to-install" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="Step 1: Where to install" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia42.png" /></p>
</figure>
<p>Let's now discuss how you can extend the central LUMI software stack with packages that you
need for your project.</p>
<p>The default location for the EasyBuild user modules and software is in <code>$HOME/EasyBuild</code>. This is not
the ideal place though as then the software is not available for other users in your project, and
as the size of your home directory is also limited and cannot be expanded. The home file system on LUMI 
is simply not meant to install software. However, as LUMI users can have multiple projects there is no
easy way to figure out automatically where else to install software.</p>
<p>The best place to install software is in your project directory so that it also becomes available
for the whole project. After all, a project is meant to be a collaboration between all participants
on a scientific problem. You'll need to point LUMI to the right location though and that has to
be done by setting the environment variable <code>EBU_USER_PREFIX</code> to point to the location where you
want to have your custom installation. Also don't forget to export that variable as otherwise the
module system and EasyBuild will not find it when they need it. So a good choice would be 
something like 
<code>export EBU_USER_PREFIX=/project/project_465000000/EasyBuild</code>. 
You have to do this <strong>before</strong> loading the <code>LUMI</code> module as it is then already used to ensure that
user modules are included in the module search path. You can do this in your <code>.profile</code> or
<code>.bashrc</code>. 
This variable is not only <strong>used by EasyBuild-user</strong> to know where to install software, but also 
by the <code>LUMI</code> - or actually <strong>the <code>partition</code> - module to find software</strong> so all users in your project
who want to use the software should set that variable.</p>
<h4 id="step-2-configure-the-environment">Step 2: Configure the environment<a class="headerlink" href="#step-2-configure-the-environment" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="Step 2: Configure the environment" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia43.png" /></p>
</figure>
<p>The next step is to configure your environment. First load the proper version of the LUMI
stack for which you want to install software, and you may want to change to the proper
partition also if you are cross-compiling.</p>
<p>Once you have selected the software stack and partition, all you need to do to activate EasyBuild to install
additional software is to load
the <code>LUMI</code> module, load a partition module if you want a different one from the default, and 
then load the <code>EasyBuild-user</code> module. In fact, if you switch to a different <code>partition</code> 
or <code>LUMI</code> module after loading <code>EasyBuild-user</code> EasyBuild will still be correctly reconfigured 
for the new stack and new partition. </p>
<p>Cross-compilation which is installing software for a different partition than the one you're
working on does not always work since there is so much software around with installation scripts
that don't follow good practices, but when it works it is easy to do on LUMI by simply loading
a different partition module than the one that is auto-loaded by the <code>LUMI</code> module.</p>
<p><strong>Note that the <code>EasyBuild-user</code> module is only needed for the installation process. For using
the software that is installed that way it is sufficient to ensure that <code>EBU_USER_PREFIX</code> has
the proper value before loading the <code>LUMI</code> module.</strong></p>
<figure style="border: 1px solid #000">
<p><img alt="Step 2: Configure the environment - Demo" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia44.png" /></p>
</figure>
<h4 id="step-3-install-the-software">Step 3: Install the software.<a class="headerlink" href="#step-3-install-the-software" title="Permanent link">&para;</a></h4>
<p><strong><em>Demo moment 2</em></strong></p>
<figure style="border: 1px solid #000">
<p><img alt="Step 3: Install the software" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia45.png" /></p>
</figure>
<p>Let's look at GROMACS as an example. I will not try to do this completely live though as the 
installation takes 15 or 20 minutes.
First we need to figure out for which versions of GROMACS we already have support.
At the moment we have to use <code>eb -S</code> or <code>eb --search</code> for that. So in our example this is
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>--search<span class="w"> </span>GROMACS
</code></pre></div>
We now also have the <a href="https://lumi-supercomputer.github.io/LUMI-EasyBuild-docs/">LUMI Software Library</a>
which lists all software that we manage via EasyBuild and make available either pre-installed on
the system or as an EasyBuild recipe for user installation.</p>
<p>Now let's take the variant <code>GROMACS-2021.4-cpeCray-22.08-PLUMED-2.8.0-CPU.eb</code>. 
This is GROMACS 2021.4 with the PLUMED 2.8.0 plugin, build with the Cray compilers
from <code>LUMI/22.08</code>, and a build meant for CPU-only systems. The <code>-CPU</code> extension is not
always added for CPU-only system, but in case of GROMACS there already is a GPU version
for AMD GPUs in active development so even before LUMI-G was active we chose to ensure
that we could distinguish between GPU and CPU-only versions.
To install it, we first run 
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>r<span class="w"> </span>GROMACS-2021.4-cpeCray-22.08-PLUMED-2.8.0-CPU.eb<span class="w"> </span>D
</code></pre></div>
The <code>-D</code> flag tells EasyBuild to just perform a check for the dependencies that are needed
when installing this package, while the <code>-r</code> argument is needed to tell EasyBuild to also 
look for dependencies in a preset search path. The installation of dependencies is not automatic
since there are scenarios where this is not desired and it cannot be turned off as easily as
it can be turned on.</p>
<p>Looking at the output we see that EasyBuild will also need to install <code>PLUMED</code> for us.
But it will do so automatically when we run
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>r<span class="w"> </span>GROMACS-2021.4-cpeCray-22.08-PLUMED-2.8.0-CPU.eb
</code></pre></div></p>
<p>This takes too long to wait for, but once it finished the software should be available
and you should be able to see the module in the output of
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>avail
</code></pre></div></p>
<details class="demo" open="open">
<summary>Demo of the EasyBuild installation of GROMACS</summary>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb --search" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia46.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -S" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia47.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -D" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia48.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -D" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia49.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia50.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia51.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia52.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia53.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia54.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="eb -r" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia55.png" />
</figure></p>
</details>
<p><strong><em>End of demo moment 2</em></strong></p>
<h4 id="step-3-install-the-software-note">Step 3: Install the software - Note<a class="headerlink" href="#step-3-install-the-software-note" title="Permanent link">&para;</a></h4>
<figure style="border: 1px solid #000">
<p><img alt="Step 3: Install the software - Note" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia56.png" /></p>
</figure>
<p>There is a little problem though that you may run into. Sometimes the module does not
show up immediately. This is because Lmod keeps a cache when it feels that Lmod searches
become too slow and often fails to detect that the cache is outdated.
The easy solution is then to simply remove the cache which is in <code>$HOME/.lmod.d/.cache</code>, 
which you can do with 
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$HOME</span>/.lmod.d/.cache
</code></pre></div>
And we have seen some very rare cases where even that did not help likely because some
internal data structures in Lmod where corrupt. The easiest way to solve this is to simply
log out and log in again and rebuild your environment.</p>
<p>Installing software this way is <strong>100% equivalent to an installation in the central software
tree</strong>. The application is compiled in exactly the same way as we would do and served from the
same file systems. But it helps <strong>keep the output of <code>module avail</code> reasonably short</strong> and <strong>focused
on your projects</strong>, and it <strong>puts you in control of installing updates</strong>. For instance, we may find out
that something in a module does not work for some users and that it needs to be re-installed. 
Do this in the central stack and either you have to chose a different name or risk breaking running
jobs as the software would become unavailable during the re-installation and also jobs may get
confused if they all of a sudden find different binaries. However, have this in your own stack
extension and you can update whenever it suits your project best or even not update at all if 
you figure out that the problem we discovered has no influence on your work.</p>
<h3 id="more-advanced-work">More advanced work<a class="headerlink" href="#more-advanced-work" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="More advanced work" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia57.png" /></p>
</figure>
<p>You can also install some EasyBuild recipes that you got from support. For this it is best to
create a subdirectory where you put those files, then go into that directory and run 
something like
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>my_recipe.eb<span class="w"> </span>-r<span class="w"> </span>.<span class="w"> </span>
</code></pre></div>
The dot after the <code>-r</code> is very important here as it does tell EasyBuild to also look for 
dependencies in the current directory, the directory where you have put the recipes you got from
support, but also in its subdirectories so for speed reasons you should not do this just in your
home directory but in a subdirectory that only contains those files.</p>
<p>In some cases you will have to download sources by hand as packages don't allow to download 
software unless you sign in to their web site first. This is the case for a lot of licensed software,
for instance, for VASP. We'd likely be in violation of the license if we would put the download somewhere
where EasyBuild can find it, and it is also a way for us to ensure that you have a license for VASP.
For instance, 
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>--search<span class="w"> </span>VASP
</code></pre></div>
will tell you for which versions of VASP we already have build instructions, but you will still have
to download the file that the EasyBuild recipe expects. Put it somewhere in a directory, and then from that
directory run EasyBuild, for instance for VASP 6.3.0 with the GNU compilers:
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>VASP-6.3.0-cpeGNU-22.08.eb<span class="w"> </span>r<span class="w"> </span>.<span class="w"> </span>
</code></pre></div></p>
<h3 id="more-advanced-work-2-repositories">More advanced work (2): Repositories<a class="headerlink" href="#more-advanced-work-2-repositories" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="More advanced work (2)" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia58.png" /></p>
</figure>
<p>It is also possible to have your own clone of the <code>LUMI-EasyBuild-contrib</code> GitHub repository
in your <code>$EBU_USER_PREFIX</code> subdirectory if you want the latest and greatest before it is in
the centrally maintained clone of the repository. All you need to do is
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$EBU_USER_PREFIX</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Lumi-supercomputer/LUMI-EasyBuild-contrib.git
</code></pre></div>
and then of course keep the repository up to date.</p>
<p>And it is even possible to maintain your own GitHub repository.
The only restrictions are that it should also be in <code>$EBU_USER_PREFIX</code> and that
the subdirectory should be called <code>UserRepo</code>, but that doesn't stop you from using
a different name for the repository on GitHub. After cloning your GitHub version you
can always change the name of the directory.
The structure should also be compatible with the structure that EasyBuild uses, so
easyconfig files go in <code>$EBU_USER_PREFIX/easybuild/easyconfigs</code>.</p>
<h3 id="more-advanced-work-3-reproducibility">More advanced work (3): Reproducibility<a class="headerlink" href="#more-advanced-work-3-reproducibility" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="More advanced work (3)" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia59.png" /></p>
</figure>
<p>EasyBuild also takes care of a <strong>high level of reproducibility of installations</strong>.</p>
<p>It will <strong>keep a copy of all the downloaded sources</strong> in the <code>$EBU_USER_PREFIX/sources</code>
subdirectory, and use that source file again rather than downloading it again. Of course
in some cases those "sources" could be downloaded tar files with binaries instead
as EasyBuild can install downloaded binaries or relocatable RPMs.
And if you know the structure of those directories, this is also a place where
you could manually put the downloaded installation files for licensed software.</p>
<p>Moreover, EasyBuild also keeps <strong>copies of all installed easyconfig files in two locations</strong>.</p>
<ol>
<li>There is a <strong>copy in <code>$EBU_USER_PREFIX/ebrepo_files</code></strong>. And in fact, EasyBuild will use this version
    first if you try to re-install and did not delete this version first. This is a policy
    we set on LUMI which has <strong>both its advantages and disadvantages</strong>. The <strong>advantage</strong> is that it ensures
    that the <strong>information that EasyBuild has about the installed application is compatible with what is
    in the module files</strong>. But the <strong>disadvantage</strong> of course is that if you install an EasyConfig file
    without being in the subdirectory that contains that file, <strong>it is easily overlooked that it
    is installing based on the EasyConfig in the <code>ebrepo_files</code> subdirectory</strong> and not based on the
    version of the recipe that you likely changed and is in your user repository or one of the 
    other repositories that EasyBuild uses.</li>
<li>The second copy is with the installed software in <code>$EBU_USER_PREFIX/SW</code> in a subdirectory
    called <code>easybuild</code>. This subdirectory is meant to have all information about how EasyBuild
    installed the application, also some other files that play a role in the installation process, and hence
    to help in reproducing an installation or checking what's in an existing installation. It is
    also the directory where you will find the extensive log file with all commands executed during
    the installation and their output.</li>
</ol>
<h3 id="easybuild-tips-tricks">EasyBuild tips &amp; tricks<a class="headerlink" href="#easybuild-tips-tricks" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="EasyBuild additional tips&amp;tricks" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia60.png" /></p>
</figure>
<p>Updating the version of a package often requires only trivial changes in the easyconfig file.
However, we do tend to use checksums for the sources so that we can detect if the available
sources have changed. This may point to files being tampered with, or other changes that might
need us to be a bit more careful when installing software and check a bit more again. 
Should the checksum sit in the way, you can always disable it by using 
<code>--ignore-checksums</code> with the <code>eb</code> command.</p>
<p>Updating an existing recipe to a new toolchain might be a bit more involving as you also have
to make build recipes for all dependencies. When we update a toolchain on the system, we
often bump the versions of all installed libraries to one of the latest versions to have
most bug fixes and security patches in the software stack, so you need to check for those
versions also to avoid installing yet another unneeded version of a library.</p>
<p>We provide documentation on the available software that is either pre-installed or can be
user-installed with EasyBuild in the 
<a href="https://lumi-supercomputer.github.io/LUMI-EasyBuild-docs/">LUMI Software Library</a>.
For most packages this documentation does also contain information about the license.
The user documentation for some packages gives more information about how to use the
package on LUMI, or sometimes also about things that do not work.
The documentation also shows all EasyBuild recipes, and for many packages there is 
also some technical documentation that is more geared towards users who want to
build or modify recipes. It sometimes also tells why we did things in a particular way.</p>
<h3 id="easybuild-training-for-advanced-users-and-developers">EasyBuild training for advanced users and developers<a class="headerlink" href="#easybuild-training-for-advanced-users-and-developers" title="Permanent link">&para;</a></h3>
<figure style="border: 1px solid #000">
<p><img alt="EasyBuild training" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia61.png" /></p>
</figure>
<p>I also want to give some pointers to more information in case you want to learn a lot more
about, e.g., developing support for your code in EasyBuild, or for support people who want
to adapt our EasyConfigs for users requesting a specific configuration of a package.</p>
<p>Pointers to all information about EasyBuild can be found on the EasyBuild web site 
<a href="https://easybuild.io/">easybuild.io</a>. This
page also includes links to training materials, both written and as recordings on YouTube, and the
EasyBuild documentation.</p>
<p>Generic EasyBuild training materials are available on 
<a href="https:/easybuilders.github.io/easybuild-tutorial/">easybuilders.github.io/easybuild-tutorial</a>.
The site also contains a LUST-specific tutorial oriented towards Cray systems.</p>
<p>There is also a later course developed by LUST for developers of EasyConfigs for LUMI
that can be found on 
<a href="https://lumi-supercomputer.github.io/easybuild-tutorial/">lumi-supercomputer.github.io/easybuild-tutorial</a>.</p>
<h2 id="containers-on-lumi">Containers on LUMI<a class="headerlink" href="#containers-on-lumi" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="Containers on LUMI" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia62.png" /></p>
</figure>
<p>Let's now switch to using containers on LUMI. 
This section is about using containers on the login nodes and compute nodes. 
Some of you may have heard that there were plans to also have an OpenShift Kubernetes container cloud
platform for running microservices but at this point it is not clear if and when this will materialize
due to a lack of personpower to get this running and then to support this.</p>
<p>In this section, we will </p>
<ul>
<li>
<p>discuss what to expect from containers on LUMI: what can they do and what can't they do,</p>
</li>
<li>
<p>discuss how to get a container on LUMI,</p>
</li>
<li>
<p>discuss how to run a container on LUMI,</p>
</li>
<li>
<p>and discuss some enhancements we made to the LUMI environment that are based on containers or help
    you use containers.</p>
</li>
</ul>
<p>Remember though that the compute nodes of LUMI are an HPC infrastructure and not a container cloud!</p>
<h2 id="what-do-containers-not-provide">What do containers not provide<a class="headerlink" href="#what-do-containers-not-provide" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="What do containers not provide" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia63.png" /></p>
</figure>
<p>What is being discussed in this subsection may be a bit surprising.
Containers are often marketed as a way to provide reproducible science and as an easy way to transfer
software from one machine to another machine. However, containers are neither of those and this becomes 
very clear when using containers build on your typical Mellanox/NVIDIA InfiniBand based clusters with
Intel processors and NVIDIA GPUs on LUMI.</p>
<p>First, computational results are almost never 100% reproducible because of the very nature of how computers
work. You can only expect reproducibility of sequential codes between equal hardware. As soon as you change the
CPU type, some floating point computations may produce slightly different results, and as soon as you go parallel
this may even be the case between two runs on exactly the same hardware and software.</p>
<p>But full portability is a much greater myth. Containers are really only guaranteed to be portable between similar systems.
They may be a little bit more portable than just a binary as you may be able to deal with missing or different libraries
in the container, but that is where it stops. Containers are usually built for a particular CPU architecture and GPU
architecture, two elements where everybody can easily see that if you change this, the container will not run. But 
there is in fact more: containers talk to other hardware too, and on an HPC system the first piece of hardware that comes
to mind is the interconnect. And they use the kernel of the host and the kernel modules and drivers provided by that
kernel. Those can be a problem. A container that is not build to support the SlingShot interconnect, may fall back to
TCP sockets in MPI, completely killing scalability. Containers that expect the knem kernel extension for good 
intra-node MPI performance may not run as efficiently as LUMI uses xpmem instead.</p>
<p>Even if a container is portable to LUMI, it may not yet be performance portable. E.g., without proper support for the
interconnect it may still run but in a much slower mode. But one should also realise that speed gains in the x86
family over the years come to a large extent from adding new instructions to the CPU set, and that two processors
with the same instructions set extensions may still benefit from different optimisations by the compilers. 
Not using the proper instruction set extensions can have a lot of influence. At my local site we've seen GROMACS 
doubling its speed by choosing proper options, and the difference can even be bigger.</p>
<p>Many HPC sites try to build software as much as possible from sources to exploit the available hardware as much as 
possible. You may not care much about 10% or 20% performance difference on your PC, but 20% on a 160 million EURO
investment represents 32 million EURO and a lot of science can be done for that money...</p>
<h2 id="but-what-can-they-then-do-on-lumi">But what can they then do on LUMI?<a class="headerlink" href="#but-what-can-they-then-do-on-lumi" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="But what can they then do on LUMI?" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia64.png" /></p>
</figure>
<ul>
<li>
<p>A very important reason to use containers on LUMI is reducing the pressure on the file system by software
    that accesses many thousands of small files (Python and R users, you know who we are talking about).
    That software kills the metadata servers of almost any parallel file system when used at scale.</p>
<p>As a container on LUMI is a single file, the metadata servers of the parallel file system have far less 
work to do, and all the file caching mechanisms can also work much better.</p>
</li>
<li>
<p>When setting up very large software environments, e.g., some Python and R environments, they can still 
    be very helpful, even if you may have to change some elements in your build recipes from your regular
    cluster or workstation. Some software may also be simply too hard to install from sources in the
    typical HPC way of working.</p>
</li>
<li>
<p>And related to the previous point is also that some software may not even be suited for installation in
    a multi-user HPC system. HPC systems want a lightweight <code>/usr</code> etc. structure as that part of the system
    software is often stored in a RAM disk, and to reduce boot times. Moreover, different users may need
    different versions of a software library so it cannot be installed in its default location in the system
    library. However, some software is ill-behaved and cannot be relocated to a different directory,
    and in these cases containers help you to build a private installation that does not interfere with other
    software on the system.</p>
</li>
</ul>
<p>Remember though that whenever you use containers, you are the system administrator and not LUST. We can impossibly
support all different software that users want to run in containers, and all possible Linux distributions they may
want to run in those containers. We provide some advice on how to build a proper container, but if you chose to
neglect it it is up to you to solve the problems that occur.</p>
<h2 id="managing-containers">Managing containers<a class="headerlink" href="#managing-containers" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="Managing containers" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia65.png" /></p>
</figure>
<p>On LUMI, we currently support only one container runtime.</p>
<p>Docker is not available, and will never be on the regular compute nodes as it requires elevated privileges
to run the container which cannot be given safely to regular users of the system.</p>
<p>Singularity is currently the only supported container runtime and is available on the login nodes and
the compute nodes. It is a system command that is installed with the OS, so no module has to be loaded
to enable it. We can also offer only a single version of singularity or its close cousin AppTainer 
as singularity/AppTainer simply don't really like running multiple versions next to one another, and currently the version that
we offer is determined by what is offered by the OS.</p>
<p>To work with containers on LUMI you will either need to pull the container from a container registry,
e.g., <a href="https://hub.docker.com/">DockerHub</a>, or bring in the container by copying the singularity <code>.sif</code> file.</p>
<p>Singularity does offer a command to pull in a Docker container and to convert it to singularity format.
E.g., to pull a container for the Julia language from DockerHub, you'd use</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>pull<span class="w"> </span>docker://julia
</code></pre></div>
<p>Singularity uses a single flat sif file for storing containers. The <code>singularity pull</code> command does the 
conversion from Docker format to the singularity format.</p>
<p>Singularity caches files during pull operations and that may leave a mess of files in
the <code>.singularity</code> cache directory or in <code>$XDG_RUNTIME_DIR</code> (works only on the login nodes). 
The former can lead to exhaustion of your
storage quota, so check and clean up from time to time. You may also want to clean up <code>$XDG_RUNTIME_DIR</code>,
but this directory is also automatically cleaned when you log out from your last running session on that
(login) node.</p>
<details class="demo" open="open">
<summary>Demo singularity pull</summary>
<p>Let's try the <code>singularity pull docker://julia</code> command:</p>
<p><!-- Used a 105x23 window size -->
<figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity pull slide 1" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia66.png" />
</figure></p>
<p>We do get a lot of warnings but usually this is perfectly normal and usually they can be safely ignored.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity pull slide 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia67.png" />
</figure></p>
<p>The process ends with the creation of the file <code>jula_latest.sif</code>. </p>
<p>Note however that the process has left a considerable number of files in <code>~/.singularity</code> also:</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity pull slide 3" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia68.png" />
</figure></p>
</details>
<figure style="border: 1px solid #000">
<p><img alt="Managing containers (2)" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia69.png" /></p>
</figure>
<p>There is currently limited support for building containers on LUMI and I do not expect that to change quickly.
Container build strategies that require elevated privileges, and even those that require fakeroot, cannot
be supported for security reasons. 
Enabling features that are known to have had several serious security vulnerabilities in the recent past, ot that
themselves are unsecure by design and could allow users to do more on the system than a regular user should
be able to do, will never be supported.</p>
<p>So you should pull containers from a container repository, or build the container on your own workstation
and then transfer it to LUMI.</p>
<p>There is some support for building on top of an existing singularity container.
We are also working on a number of base images to build upon, where the base images are tested with the
OS kernel on LUMI.</p>
<h2 id="interacting-with-containers">Interacting with containers<a class="headerlink" href="#interacting-with-containers" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="Interacting with containers" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia70.png" /></p>
</figure>
<p>There are basically three ways to interact with containers.</p>
<p>If you have the sif file already on the system you can enter the container with an interactive shell:</p>
<div class="highlight"><pre><span></span><code>singularity shell container.sif
</code></pre></div>
<details class="demo" open="open">
<summary>Demo singularity shell</summary>
<p><figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity shell" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia71.png" />
</figure></p>
<p>In this screenshot we checked the contents of the <code>/opt</code> directory before and after the
<code>singularity shell julia_latest.sif</code> command. This shows that we are clearly in a different
environment. Checking the <code>/etc/os-release</code> file only confirms this as LUMI runs SUSE Linux
on the login nodes, not a version of Debian.</p>
</details>
<p>The second way is to execute a command in the container with <code>singularity exec</code>. E.g., assuming the 
container has the <code>uname</code> executable installed in it,</p>
<div class="highlight"><pre><span></span><code>singularity exec container.sif uname -a
</code></pre></div>
<details class="demo" open="open">
<summary>Demo singularity exec</summary>
<p><figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity exec" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia72.png" />
</figure></p>
<p>In this screenshot we execute the <code>uname -a</code> command before and with the
<code>singularity exec julia_latest.sif</code> command. There are some slight differences in the
output though the same kernel version is reported as the container uses the host kernel.
Executing</p>
<div class="highlight"><pre><span></span><code>singularity exec julia_latest.sif cat /etc/os-release
</code></pre></div>
<p>confirms though that the commands are executed in the container.</p>
</details>
<p>The third option is often called running a container, which is done with singularity run:</p>
<div class="highlight"><pre><span></span><code>singularity run container.sif
</code></pre></div>
<p>It does require the container to have a special script that tells singularity what 
running a container means. You can check if it is present and what it does with <code>singularity inspect</code>: </p>
<div class="highlight"><pre><span></span><code>singularity inspect --runscript container.sif
</code></pre></div>
<details class="demo" open="open">
<summary>Demo singularity run</summary>
<p><figure markdown style="border: 1px solid #000">
  <img alt="Demo singularity run" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia73.png" />
</figure></p>
<p>In this screenshot we start the julia interface in the container using
<code>singularity run</code>. The second command shows that the container indeed
includes a script to tell singularity what <code>singularity run</code> should do.</p>
</details>
<p>You want your container to be able to interact with the files in your account on the system.
Singularity will automatically mount <code>$HOME</code>, <code>/tmp</code>, <code>/proc</code>, <code>/sys</code> and <code>dev</code> in the container,
but this is not enough as your home directory on LUMI is small and only meant to be used for
storing program settings, etc., and not as your main work directory. (And it is also not billed
and therefore no extension is allowed.) Most of the time you want to be able to access files in
your project directories in <code>/project</code>, <code>/scratch</code> or <code>/flash</code>, or maybe even in <code>/appl</code>.
To do this you need to tell singularity to also mount these directories in the container,
either using the 
<code>--bind src1:dest1,src2:dest2</code> 
flag or via the <code>SINGULARITY_BIND</code> or <code>SINGULARITY_BINDPATH</code> environment variables.</p>
<h2 id="running-containers-on-lumi">Running containers on LUMI<a class="headerlink" href="#running-containers-on-lumi" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="/running containers on LUMI" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia74.png" /></p>
</figure>
<p>Just as for other jobs, you need to use Slurm to run containers on the compute nodes.</p>
<p>For MPI containers one should use <code>srun</code> to run the <code>singularity exec</code> command, e.g,,</p>
<div class="highlight"><pre><span></span><code>srun singularity exec --bind ${BIND_ARGS} \
${CONTAINER_PATH} mp_mpi_binary ${APP_PARAMS}
</code></pre></div>
<p>(and replace the environment variables above with the proper bind arguments for <code>--bind</code>, container file and
parameters for the command that you want to run in the container).</p>
<p>On LUMI, the software that you run in the container should be compatible with Cray MPICH, i.e., use the
MPICH ABI (currently Cray MPICH is based on MPICH 3.4). It is then possible to tell the container to use
Cray MPICH (from outside the container) rather than the MPICH variant installed in the container, so that
it can offer optimal performance on the LUMI SlingShot 11 interconnect.</p>
<p>Open MPI containers are currently not well supported on LUMI and we do not recommend using them.
We only have a partial solution for the CPU nodes that is not tested in all scenarios, 
and on the GPU nodes Open MPI is very problematic at the moment.
This is due to some design issues in the design of Open MPI, and also to some piece of software
that recent versions of Open MPI require but that HPE only started supporting recently on Cray EX systems
and that we haven't been able to fully test.
Open MPI has a slight preference for the UCX communication library over the OFI libraries, and 
currently full GPU support requires UCX. Moreover, binaries using Open MPI often use the so-called
rpath linking process so that it becomes a lot harder to inject an Open MPI library that is installed
elsewhere. The good news though is that the Open MPI developers of course also want Open MPI
to work on biggest systems in the USA, and all three currently operating or planned exascale systems
use the SlingShot 11 interconnect so work is going on for better support for OFI and for full GPU
support on systems that rely on OFI and do not support UCX.</p>
<h2 id="enhancements-to-the-environment">Enhancements to the environment<a class="headerlink" href="#enhancements-to-the-environment" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="Environment enhancements" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia75.png" /></p>
</figure>
<p>To make life easier, LUST with the support of CSC did implement some modules
that are either based on containers or help you run software with containers.</p>
<p>The <code>singularity-bindings/system</code> module which can be installed via EasyBuild
helps to set <code>SINGULARITY_BIND</code> and <code>SINGULARITY_LD_LIBRARY__PATH</code> to use 
Cray MPICH. Figuring out those settings is tricky, and sometimes changes to the
module are needed for a specific situation because of dependency conflicts
between Cray MPICH and other software in the container, which is why we don't
provide it in the standard software stacks but instead make it available as
an EasyBuild recipe that you can adapt to your situation and install.</p>
<p>As it needs to be installed through EasyBuild, it is really meant to be 
used in the context of a LUMI software stack (so not in <code>CrayEnv</code>).
To find the EasyConfig files, load the <code>EasyBuild-user</code> module and 
run</p>
<div class="highlight"><pre><span></span><code>eb --search singularity-bindings
</code></pre></div>
<p>You can also check the 
<a href="https://lumi-supercomputer.github.io/LUMI-EasyBuild-docs/s/singularity-bindings/">page for the module in the LUMI Software Library</a>.</p>
<p>You may need to change the EasyConfig for your specific purpose though.
E.g., the singularity command line option <code>--rocm</code> to import the ROCm installation
from the system doesn't fully work (and in fact, as we have alternative ROCm versions
on the system cannot work in all cases) but that can also be fixed by extending
the <code>singularity-bindings</code> module (or by just manually setting the proper environment variables).</p>
<figure style="border: 1px solid #000">
<p><img alt="Environment enhancements (2)" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia76.png" /></p>
</figure>
<p>The second tool is a container that we provide with some bash functions
to start a VNC server as temporary way to be able to use some GUI programs
on LUMI until the final setup which will be based on Open OnDemand is ready.
It can be used in <code>CrayEnv</code> or in the LUMI stacks. The container also
contains a poor men's window manager (and yes, we know that there are sometimes
some problems with fonts). It is possible to connect to the VNC server either
through a regular VNC client on your PC or a web browser, but in both cases you'll
have to create an ssh tunnel to access the server. Try</p>
<div class="highlight"><pre><span></span><code>module help lumi-vnc
</code></pre></div>
<p>for more information on how to use <code>lumi-vnc</code>.</p>
<p>The final tool is a container wrapper tool that users from Finland may also know
as Tykky. It is a tool to wrap Python and conda installations in a limited number
of files in a transparent way. On LUMI, it is provided by the <code>lumi-container-wrapper</code>
module which is available in the <code>CrayEnv</code> environment and in the LUMI software stacks.
It is also <a href="https://docs.lumi-supercomputer.eu/software/installing/container-wrapper/">documented in the LUMI documentation</a>.</p>
<p>The basic idea is that you run a tool to either do a conda installation or an installation
of Python packages from a file that defines the environment in either standard conda
format (a Yaml file) or in the <code>requirements.txt</code> format used by <code>pip</code>. </p>
<p>The container wrapper will then perform the installation in a work directory, create some
wrapper commands in the <code>bin</code> subdirectory of the directory where you tell the container
wrapper tool to do the installation, and it will use SquashFS to create as single file
that contains the conda or Python installation.</p>
<p>We do strongly recommend to use the container wrapper tool for larger conda and Python installation.
We will not raise your file quota if it is to house such installation in your <code>/project</code> directory.</p>
<details class="demo" open="open">
<summary>Demo lumi-container-wrapper</summary>
<p>Create a subdirectory to experiment. In that subdirectory, create a file named <code>env.yml</code> with
the content:</p>
<div class="highlight"><pre><span></span><code>channels:
  - conda-forge
dependencies:
  - python=3.8.8
  - scipy
  - nglview
</code></pre></div>
<p>and create an empty subdirectory <code>conda-cont-1</code>.</p>
<p>|Now you can follow the commands on the slides below:</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 1" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia77.png" />
</figure></p>
<p>On the slide above we prepared the environment.</p>
<p>Now lets run the command </p>
<div class="highlight"><pre><span></span><code>conda-containerize new --prefix ./conda-cont-1 env.yml
</code></pre></div>
<p>and look at the output that scrolls over the screen.
The screenshots don't show the full output as some parts of the screen get overwritten during
the process:</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 2" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia78.png" />
</figure></p>
<p>The tool will first build the conda installation in a temprorary work directory
and also uses a base container for that purpose.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 3" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia79.png" />
</figure></p>
<p>The conda installation itself though is stored in a SquashFS file that is then
used by the container.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 4" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia80.png" />
</figure></p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 65" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia81.png" />
</figure></p>
<p>In the slide above we see the installation contains both a singularity container
and a SquashFS file. They work together to get a working conda installation.</p>
<p>The <code>bin</code> directory seems to contain the commands, but these are in fact scripts 
that run those commands in the container with the SquashFS file system mounted in it.</p>
<p><figure markdown style="border: 1px solid #000">
  <img alt="demo lumi-container-wrapper slide 6" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia82.png" />
</figure></p>
<p>So as you can see above, we can simply use the <code>python3</code> command without realising
what goes on behind the screen...</p>
</details>
<p>The wrapper module also offers a pip-based command to build upon the Cray Python modules already present on the system</p>
<h2 id="conclusion-container-limitations-on-lumi-c">Conclusion: Container limitations on LUMI-C<a class="headerlink" href="#conclusion-container-limitations-on-lumi-c" title="Permanent link">&para;</a></h2>
<figure style="border: 1px solid #000">
<p><img alt="Container limitations on LUMI" loading="lazy" src="https://462000265.lumidata.eu/4day-20230530/img/LUMI-4day-20230530-software/Dia83.png" /></p>
</figure>
<p>To conclude the information on using singularity containers on LUMI,
we want to repeat the limitations:</p>
<ul>
<li>
<p>Containers use the host's operating system kernel which is likely different and
    may have different drivers and kernel extensions than your regular system.
    This may cause the container to fail or run with poor performance.</p>
</li>
<li>
<p>The LUMI hardware is almost certainly different from that of the systems on which
    you may have used the container before and that may also cause problems.</p>
<p>In particular a generic container may not offer sufficiently good support for the 
SlingShot 11 interconnect on LUMI which requires OFI (libfabric) with the right 
network provider (the so-called Cassini provider) for optimal performance.
The software in the container may fall back to TCP sockets resulting in poor 
performance and scalability for communication-heavy programs.</p>
<p>For containers with an MPI implementation that follows the MPICH ABI the solution
is often to tell it to use the Cray MPICH libraries from the system instead.</p>
</li>
<li>
<p>Building containers is currently not supported on LUMI due to security concerns.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        




<footer class="md-footer">

  

  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      
    <div class="md-footer-copyright">
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" 
             style="border-width:0" 
             src="https://i.creativecommons.org/l/by/4.0/80x15.png"
        />
      </a>
      This work is licensed under a&nbsp;
      <a rel="license" 
         href="http://creativecommons.org/licenses/by/4.0/"
      >
        Creative Commons Attribution 4.0 International License
      </a>
    </div>

      
      <div class="md-social">
  
    
    
    
    
    <a href="https://www.youtube.com/channel/UCb31KOJ6Wqu0sRpIRi_k8Mw" target="_blank" rel="noopener" title="LUMI on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/lumi-supercomputer" target="_blank" rel="noopener" title="LUMI on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/LUMIhpc" target="_blank" rel="noopener" title="LUMI on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "header.autohide", "toc.follow", "content.code.annotate", "content.code.copy", "content.footnote.tooltips"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>